 okay happy oh yeah cool all right welcome everybody a good afternoon hope you enjoyed the lunch if you didn't it's now our fault so don't put in the review yeah yeah don't don't don't do that so you know sessions after lunch is always a challenge to keep you guys entertained and make sure that you don't fall into asleep and my name is Ricardo and together with Hayek Aleppo Aleppo we will be talking about how you go and act at solutions that expands as your entire stack so that's that's the plan for the next hour all right taken away you see he just came for the introductions and the Selphy crazy right that's what you do when you look good you know all right all right so you know I think that question how many of you actually have hands-on experience with Ezra stack okay so for those that did not raise your hand how many of you actually like have no idea over what or what address stack is okay so in the next 73 minutes 3 2 seconds I'm going to give you a quick overview of what Ezra stack is they wrote that Azure stack plays and how we can build solutions on that for those of you that already use Azure stack hopefully the concepts are you bring to you and some of the demos are things that you can actually take home and and start working for those of you did not raise your hand on neither of the questions I assume you is going to stay here and watch the presentation so I'll do my best to provide you insights as well all right guys one thing you have to keep in mind is that your stack is about a short it's a sure that you run on your data center okay so with that said let's look at you know some of the key tenants of measure easure provides you a broad reach across the globe very productive a set of services you can leverage asier to be to not only you know create your applications but also make your applications integrate with all the microsoft services we talked a lot about the Microsoft graph for example in yesterday and today which means that you can really use the cloud as you know that brain of your applications with the advantage of having a broad reach across the globe azor is trusted and secure which means that you have a very solid basis to start creating your applications another very important aspect of engine is really a sure is hybrid so there are many flavors of Asia and when I say flavors that is the public hazard that you hit when you go to Puerto Rico there is government measure that is a sure in some specific geographies and that is that a sure that you take to your data center which is called as your stack all those different flavors of azure they share some common tenants a identity platform that is shared across Asia and there are that can also be used across other Microsoft services I also share a unified development experience with a great support of tooling all the tools that you are used to use and you love to use either Microsoft tools or open-source tools provides a the ability for you to develop in pretty much any of the major existing languages and ID's today so it really provides a great development experience and also a secure infrastructure for your applications and a way for you to manage your resources from a integrate point either from the other portal or through the diverse set of api's that edge provides and that's true for publication and Azure stack so with that said the combination of Azure stack and Azure provides you real hybrid capability and when we start looking at the specifics of version of azure stack the fact that we have that we share as a resource manager as a resource manager it is the the foundation of the resource lifecycle manager so as a resource manager controls the lifecycle of your resources right the same absolutely the same as a resource manager that you encounter in a public editor is the azure resource manager that you encounter in a show stack and the other retro clouds which means that your templates and scripts they can be out or in a way that the final location of your artifact being a VM or a website or a service function is pretty much a configuration of your deployment automation and at the key at the heart of this is really the consistency and is the consistency between the two era and Azure stack that allows you to basically choose where to put your your artifacts on and consistency is something that I'm going to talk a lot during this talk and it is it is the foundation for you to create hybrid apps because when you do have a level of consistency between the different cloud the the different clouds you can then create your applications in a way that part of your data may reside on Prem for example with Azure stack and then for scale you may be used a sure it allows scenarios like AI in the edge artificial intelligence on the edge where you you know train your models at scale in the public cloud develop and train your models in the public cloud and then score those models in the location where the action happens with Azure stack and I think you know the best way to show this for a quick demo right you have 78 slides no I don't can you imagine 78 slides with Brazilian accent and an Italian accent coming soon no all right is there any Brazil I'm Brazilian so is there any Brazilian here no okay I'm not going to bet if there are Italians you can ask that later all right so consistency what I have here I'm connected to one of my demo environments and you are looking at the azure portal in Azure stack and I say as reporter because again if if you look at the portal user stack and we switch to a sure really the clue that you have that you are enhancer or Escher stack is the logo right they log on the top corner right now so you can confirm that by the URL so this is agile and this is Ezra stack all right not not super exciting right I mean you kind of obvious but the reason bringing this up is this very subtle consistency factors really allows you to focus on designing your apps other than learning specific languages or tools or worse than that having different code bases right in the past what would happen is if you were targeting if we're creating a solution to the public cloud it would be one code base the solution to run on your data center would be a different code base indeed with Azure stack we bring ashore including as a resource manager the tooling to your data center great we look at the portal and I could go through the portal experience but I would save you from that you can try ourself or the the ones here they do not try yet so this is only one level of consistency so let's take a look at what that means for an application development so here's what I'm going to do right now we are looking at my actual stack portal and let me look at my resource groups here I have a few resource groups five and what I like to do is I like to switch to PowerShell and I won't go into much details of what this particular script does but basically if you look at all the way to the end of the script here there is a deployment call right a new Azure RM resource group deployment my goal here is not to teach you PowerShell or as your SDK for PowerShell it's just to highlight the key concept which you enter you interface with Azure and Azure stack through the same SDK right so if you are doing resource group deployment and you use PowerShell we do a new error RM resource group great deployment and what's happening here it's invoking a template that is in github and per formula deployment this is a very simple templates part of the quick starts and it just creates a VM alright I won't go into the specifics of the template here so what I like to do is you know we'll go ahead take a look at this code here and I've set a breakpoint exactly where the subscription where I get my my subscription and you can see the common comment again as RM subscription great so what I would do now is let me double check up here you'll notice I just set a handy variable says deploy tree stack which can be either true or false in this case I want to deploy this template to Azure stack and by the way how you would do these different folks have different programming styles right this is just the way I structure my code but borrow line is I have a variable that construed that says whether or not I'm targeting a shallow razor stack and the difference you know if we take a close look at the code is that what I would do if I'm the point user stack I perform some calls that specify some they are main points which are custom because as a stack is running on your data center so the the endpoints are not necessarily public or if I'm deploying to a sure the end points are well known so I don't need to specify an end point the only thing I go ahead and do is a looking at or M account but keep in mind that is the same as DK the only real difference is the end points of arm as a resource manager change so in my code I have a provision for that and of course this is a powershell example could be CLI there are many other ways to do that all right so let's run this thing and see what happens so I just hit hit run here and we did set a breakpoint in the subscription call so we'll go ahead and do a step over it and then what happens is we you get a subscription so ok notice PowerShell is reporting that I have a subscription with a given subscription ID reports the environment in this case a stack user and again environment the concept of our of the tooling which is basically whether you are wanted to target the public cloud or the sovereign clouds or Azure or every stack you specify the endpoints great so what I did the only thing I did is I specify the endpoints for my address tag now the output of the the command is exactly the same the objects are the same because indeed the SDK is the same great so what I would what I would do now is I'll just go ahead and let this thing run and a new resource group was created resource group OSS CFR RG 278 and clearly you see that I'm not good at naming things go ahead treasure stack you can see that a new resource group was just created and if I go ahead and click there they stay Lowe's is deploying right so I leave the the these resources should be created and I'm going to switch to another PowerShell window right and in this powershell we know what I'm going to do is I'm going to set that variable deploy to stack equals false which means that my code now you target asier and that will do exactly the same thing we will just set a breakpoint here and what's going to happen is we'll go through the same the same flow me do step over and you can see that my environment now is that your cloud and I have subscription ID the same constructs that I had on the prior call but guess what the endpoints are different now I'm my PowerShell environment is pointing to the public a sure so the deployment is happening in Azure with the same template so if that said I would just go ahead and continue running this I need to create a new resource group the resource group is 457 right so let's do this let's go to publication now and let's filter my resources and to make it easy and if you to by OSs 4:57 is here I just created the status is deploying she means that you know that deployment is going on so why this is important and again super simple demo the goal was not to stern you with how easy is to write a script to deploy something but it's to highlight that the templates is the same because arm is the same as a resource manager is the same the script is the same because I use one SDK which is the PowerShell the adder as you came for PowerShell I could be using CLI as well or I could be using one of the SDKs for languages like Python Ruby dotnet and others the bottom line is the consistency allows you to create your resources and then choose where you place those resources alright and not for consistency so let's take a look at some other concepts and how we can use this consistency to in reality create hybrid applications so let me switch my screen here so again always keep in mind the importance of a sure as the azure stack being an extension of Azure right when you use this consistency on your favor you indeed can create applications that take the best out of the resources you have on Prem and at the same time realize the potential of the azure presence worldwide so what customers have been doing in terms of hybrid and we spend a consumed amount of time meeting with customers all over the world during the inception of register and with the help of those customers and customers interview interviews and requirement gay trans catering we come to few pillars of what a hybrid application would look like right so consistency and I allude to consistency briefly in the demo you know this flexibility that being able to create our resources and place in either clouds is very very helpful then having the ability of leveraging the azure services available on premises is also something that customers find very very helpful and finally all of that on leveraging a integrate the different experience where customers can basically get an appliance rollout on the data center press a button blog power and networking and then they have that mini Azure to run you know the modern clouds the same type of modern apps the same times of apps that they will be running in the public cloud so with that said if we look at a little more drill down on those scenarios edge and disconnected and you know if you if you're watching such as keynote hiji talk into scenarios of bringing a sure to the edge bringing ashore to places like ships in the middle of the sea oil drilling platforms or even in scenarios where you know you have vehicles performing any kind of maintenance in the field all those things it's about running your application and designing and running your applications in one model which is the error model and running those applications where the action coding code happens now regulation across the world business faces different types of regulations and some regulations require you to store data in a given location right and that can be accomplished in many different ways but if you are designing developing and managing your applications in Azure it's very helpful to be able to use the same model the same operation model while maintaining data or artifacts where they are needed so that's another very common scenario and finally being able to run modern apps on premises and being able to integrate those modern apps with existing systems for example you may have factory floor systems that you like to integrate while designing a application based on functions service computing or API apps so if you have Ezra stack on Prem you can do that Ezra stack has app services for example a with functions with websites API app so you can design our modern application and have that modern application talking with on-premise assistance now with those three pillars let's take a look a little bit more on what such pillar would look like so for example what can I really do on legend disconnected you know one example is I can use the public cloud to do data aggregation and then use the public cloud to do data collection and then use the azure stack or miniatures tax to perform what AI scoring on my AI models or do some kind of data processing and keep data local while exer facing some part of the data to the public cloud so the borderline of agent disconnect is you can look at you leverage the broad or Asher to basically do the training of your models and the large-scale data collection and then new users will stack to basically treat the data in the processes that need to keep on prime and keep in mind a limited or no connectivity disconnect is a very very I think strong word to describe you may have entered me intermittent connectivity what intermittent connectivity is you may have sensors on the field and sometimes those sensors help on activity sometimes those sensors don't have connectivity right so then you can take a scenario like that where you use Azure stack to basically maintain that data y/o connectivity doesn't exist and when connectivity is established you can you can integrate with systems in the public cloud so that's one example of edge and disconnected solutions now how this ties to the exit to the demos I presented earlier where we saw the consistency again having the consistency between the clouds means that you cannot attach your solutions in a way that you can deploy the different pieces of the application where you really need it all right so how about regulations you know we have a one one of my customers does health care solutions in a high regulated geography so they do require that to keep data on premise and in specific countries so how can they use Azure stack for that again they can store the PII data in Azure stack using things like the capabilities we have for blob tables queues also see Co and my sequel resource providers and then for the data that is not required on Prem they can leverage address tag for the modeling of big data and the other thing that surfaces in this kind of example is that not only you can go to the public cloud to do big data modeling ai as I mention as I have mentioned before but you can also go to the public cloud for scenarios like cloud births so you keep your data on prams on Prem but you are able to leverage the cloud to birth some of the capabilities so this is some of the examples of use cases we encountered when we talk with different customers so I think that the best way for us to explore that is looking at the era demo right so I was thinking on different ways we could do a hybrid solution and and that reminds me this morning of another customer this customer they have to ingest a large volume of files in different ingress points all over the world now those files end up part of the information of those files end up being having to be processed our brand by the way they do large-scale printing neither the type of printing you do at home but the really the large-scale printing which requires some football size infrastructure so how to solve the problem of easily ingest documents from all over and then basically at some point in bringing those though that data on pram with the same programming model so that's the challenge that I I it remind me this morning and I like to walk you through that so let's switch to the demo environment all right okay so I like to cause I'm trying to concentrate on Azure stack so let's switch my screen here great so first of all if you are a if you're developing a hybrid solution or you are about to develop you know the first thing you ask is what is available for me to use because personally I try to write the least amount of code that I can so let's take a look at this particular address that environment and see what type of capabilities I have available all right so if I look at my resource groups actually there are different ways I can do that so so let's go to the marketplace and uh you know let's take a look here do I have a Seco server yes I can create a sequel database I can also create a my sequel database if I want so basically these two these are two of our resource providers Seco and my Seco another option that I have is let's say I want to create a function here I have a function app and is exactly the same function app that you are used to in Azure because it's the same resource provider that exists in asthma so Web Apps function Apps saw the API apps etc awesome there are some other things here that if I look at my marketplace if I search again for my Seco I can either create a my sequel database using the my sequel resource provider or if I want I can create a my sequel VM using a marketplace I know from bitNami bear in mind is marketplace Islands exactly the same it comes from Lasher so the address the address Tech marketplace is has the ability to syndicate islands from Azure so what I'm highlighting to you is the different capabilities that we have out of the box also you know when we talk about hybrid solutions I cannot miss one of the announcements we we did yesterday so we have the marketplace Island that creates a kubernetes cluster that's in preview that was announced again we just announced this today I'm sorry yesterday and the same thing for all the four other technologies right so service fabric it's another capability that we hear all the time from our customers so we do have a marketplace Island that enables you to create surface fabric clusters again this was we just announced this yesterday now bear in mind this is not the surface fabric resource provided the managed service this is not IKS the azure kubernetes services the managed service these are marketplace islands there creates those who bananas or service fabric clusters for you the key difference here is the azure version is a fully managed service in Ezra stack it's a marketplace area that will basically automate the creation of those clusters relying on is infrastructure anyway this is just to give an idea of the current capabilities so everything that I show you is a current capability great so let's go back let's not deviate from our goal and our goal was to ingest data in a large scale using Azure and persist that data in on a on-premise system great so how do we accomplish that so if I look at the resource groups you know some of the deployments some of the resources I had deployed ahead of time for obvious reasons so if I look at this this resource group here I have a sequel database there was provision using the sequel resource provider so I have a sequel database an existing sequel database which by the way just to highlight this is what it looks like so here I have a simply open source tool that brings data from different databases so what you are seeing is again a connection to a sequel instance and just to show you that that I have some data there I have a table with a couple of columns again some abstraction is needed for this demo so assume that you know we are starting data on cycle server and this data we will eventually flow into a home pram system so our end goal again is to ingest large large amount of files and bring this down here now this Seco database is running as your stack how can we bring data to it there are different ways I personally love functions serverless functions basically are the the biggest bang for the bucks it allows you to create processing bays on many languages in this case I create a simple function using c-sharp it allows you to either having fully you know development experience using Visual Studio and everything compiling your code all those things or allows you to just write you know basically scripts and compile at runtime which saves some time so for the purpose of the demo that's what I did I create a function a very straightforward it just receives an i10 and writes to a sequel database I'm going to the details of the code again very straightforward uses the the Seco client classes and what happens is this function when this function runs it will you write a record to that sequel database right and here you see our lawfully a sequel statement alright and again I'm alluding to maybe an existing sequel assistant that you are already head of Bram something like that so we have a function that basically when it's called persist data on sequel server great we have a challenge here actually you have many challenges so the first challenge is I like to ingest data using Azure using the global reach of azure okay how can we do that how we ingest data using Azure they're probably like 10 different ways right it's one way one of the ways I or chiheb yes but you know I thought about that but how about let's try to do something even simple if it's a file what an user would probably doing onedrive seems a pretty neat way to ingest files right and again this is this is not a architecture a session in the sense of don't get this code and running production it's just let's be creative so I'm going to leverage one drive the scale of one drive to ingest files and then have a sure stack a processing Azure stack to run every time a file happens FIO is ingesting on Drive so here's another challenge how do we connect our function to a processing Azure different ways I can think of I will stab lished VPN right could be one way I could have Express route yeah that's cool like the biggest pipe ever all right guys every single serving edge or the majority of them they have public endpoints right so let's leverage the public endpoints for the sake of this demo so what I'm doing is if if you look at my function configuration now things get get pretty interesting right if I go to my application settings what I will have is I have a connection string it's my storage connection string notice how this is a as your cue connection string okay great now if I look at my function you see that I have a binding to the connection string and to a kilning demo one alright so if we go to a sure now and bear with me it's easy to get lost in this demo I know a lot of screen changes so if I go to my storage account and look at my cues in that storage account I need have demo one alright and here's the demo 1q so here's what happens using functions in Azure stack I bound my function to a public endpoint in yeah sure my function will kick off every time I new I think comes to that to that queue it will read the message and then we have that a very small c-sharp code that writes data to the database right is it the only way to do hybrid of course no I mentioned VPN Express route there are different ways this is just a quick and dirty way all right everything is almost ready except one thing what is missing here what is missing is how we ingest the files so for that flow okay ahead of time I went and create a flow that reads read files from a folder named build demos and write the file content to a queue okay alright so what I'm going to do here is let's create a file let's save this guy should have done this ahead of time apologize for that so I will now move to the folder all right so here's what's going to happen remember my function is stopped because I want to ensure that you you see it happening that fire being jested after the fire is ingested it will go through the queue it will stay on the queue until my function picks up and then when the friction function picks up what's going to happen is it will write you as your stack so let's go ahead and enable the function and before I do that this is the data my sequel database I only have seven rows right so we'll go ahead and and enable the function and we should have the data flowing to Seco server all right so what will you do now is it will take a while for that file to end up on the queue so we'll leave it running and then after this happens we will see the data flowing to the database so I let this sit oh that was actually quick okay clearly my spelling skills are not the best but you see hello build which was what we wrote in the file could this be IOT hub yes would be a more real-world example yeah you know IOT is one of the key scenarios that we be engaging with customers but you know what why I like this this scenario I mean I just wrote it right so I know that that's one thing but besides that you know when we hear things like the Microsoft graph the different services not only in the azure but the different services within Microsoft that's power right I use something as flow flow is like the most and user-friendly thing that exists you can integrate flow with Azure now take all the possibilities of the type of applications you can create right and this is real hybrid so I have as you're doing the data ingestion I have address tag handling the on pram and the integration with my sequel database so this was to give an idea of how a hybrid solution can be created so let's switch back to the slides and drill down a little bit more on some of those scenarios first of all hybrid has many means right that's every time that I bring this is light up about developing hybrid solutions I realize that folks have different interpretations of what is really hybrid I do have basically three the way III I describe hybrid is three ways matching resources in both cloud so what does that mean remember my first example the consistency the consistency example was exactly that what I did I did the deployment on both clouds okay where can I use where that type of deployment is applicable many instance for example you develop solutions for many customers some of those customers will get your solution and running after some customers will ask you to run the same solution on brand so you can get the same set of resources templates scripts etc and allow your customers to deploy and then you can in that scenario you can leverage the marketplace to basically create a package that shows up on the marketplace etc another example of matching resources in both clouds is Devon test right Devon test across the globe you have many development teams working across the globe and you wanna ensure that all of them have the latest version of your application to test so what you do is you can do testing as you're deploying your app for testing yeah sure and then deploying in Azure stack that's one a couple of examples on matching resources on both cards now the things really get interesting when we look at the bottom two examples right when you have some type of connectivity between Asia and Azure stack and some type of connectivity can be something simple as we did today we leverage a ashore cue and point or something more elaborate as VPN Express route which you allows you which will allow your workload to basically if you have a VM running one of the own Avena after stack that is VPN to Azure that the M has access to the resources on the V net in Azure and vice versa right so connectivity definitely enables you to spread your workloads around ok let's take a look at some more details on that so my Chi has been it has been spending a lot of time creating guidance for customers to create such hybrid applications and as part of everything we announced yesterday I show you some of those things you know the kubernetes service fabric etc we also announced the launch of a hybrid patent so if you go to the azure stack documentation you start to see guidance to create add search patterns and then let me talk about some of those patterns that are really key so in terms of foundation right what we have is there be the ability to provide connectivity so again connectivity to Azure between analyzer stack can be accomplished through different ways and when you have that connectivity established you can either leverage public endpoints or actually have there be to go through both agile and azure stack if you have VPN and/or Express route now it's very important to highlight that if you have different as your resource managers right so the resources that you place in address stay with restack the resources you place in Azure stay with Azure as a resource manager in Azure is a different instance than Azure stack which means that for you to orchestrate those resources you need you need to leverage some kind of automation that can be as simple as the example Y demo to you at the beginning of this session where you have a powershell script that does deployment both both places or something more evolved as what i described on the right side of the screen which is a CI cg pipeline that takes in consideration both clouds another announcement I'm full of announcements sorry these are all news another announcement we did yesterday the VSDs chain release the vs TS tests for error stack where you can deploy app service you can deploy arm templates or perform storage operations from vs GS what that allows you to do is one single pipeline target targeting the different clouds and by the way I will have a list of the related sessions but tomorrow on J from my team will be presenting all development tools and their hops and one of the things is going to show is how you can accomplish a single integrated pipeline with virtualization stack I highly recommend you attend in that session I have the link for the session at the end of these lines good so what else can be done right so when you have such capability you can do things like burst treasure this was a prototype we design with one of our customers and that particular customer has a very short time to acquire business for customers to actually use their service that is a signer period that is very short on the year at the end of the year and at the same time they have to keep some data on pram great so in this prototype we we design with this particular customer we leverage AB service we leverage the sequel resource provider as I I using my demo as well to build both the user experience through web apps and functions as well as the data cheer on pram and then for the the front-end here what we do is at sign up times those times of the year where the amount of people accessing the front-end is greater than a capacity they have on pram they rely on app services in Asia now how the traffic is redirected that's another challenge that you you encounter or hybrid systems there is something called as your traffic manager so as your traffic manager provides you an ingress point in Azure and based on rules it can redirect you right so then with a combination of SEO traffic manager and VPN this particular solution were able to burst to the cloud when needed and when traffic die down traffic would get redirected to the front end on the internal network and by the way this is one of the patterns that we actually have have documented many years of variable or on our documentation so again it's very powerful and all of these gloob is the ICG pipeline again the ability of rev new versions etc either in a garage track through a single process in that particular case of yes yes you know another example is keeping data local we just did that on our simple demo right we leveraged storage in Azure stack and we did all the ingress in Azure and we kept data local this is one of the scenarios I like the most and we've been working with customers that do a lot of AI and IOT at the edge either plants in remote areas or as I mention early in the session you know drilling rigs in the middle of the ocean that need to score data locally so basically rely on Azure stack to do the scoring while all the training aggregation happens in Asia for this a particular scenario we did a prototype relying on machine learning york benching azure to create your models and train your models the output of that is actually a container that you can grab the container and ran in the azure stack to do this Corinne so when we start looking at as a stacking such scenarios it really brings you all the advantages of having as a common programming model and a model where you manage your solution on Prem while relying on the large scale of Asia and finally the other pattern I like to disk share with you is the power of having something like a so traffic manager and leveraging Azure to do your ingress so what you can do with that is again you ingre your ingress point can be anywhere the world and then through as a traffic manager you can redirect treasure stack now there's a caveat here right the caveat is for traffic manager to redirect traffic to a short stack couple of things need to happen you either have your address tagged with you know inbound connectivity allowed or you establish VPN right so we establish VPN treasure and then Traffic Manager can redirect the traffic so this is very powerful because again you can have ingress point all over the world Brazil Italy and then have have your processing in a specific place now not necessarily this scenario like that requires traffic management in VPN if you think about it the demo we saw with in jet ingesting data in onedrive I do not rely on traffic manager generally rely on own traffic manager but I did rely on the abbey of SEO services to have you know public endpoints so there are different ways to accomplish hybrid I think the great thing is a short stack provides you the foundation to do that so this is all great at least this is very excited exciting and every day that I look I hear about customers designing these apps it's super exciting now how about how we keep those apps secure or in other words you know how to take some of the security a worries out of your hands right how can we do that with that said I have filippo to give an overview of how Azure stack handles security and what it means for you developing those hybrid applications filippo the floors is yours all right Thank You Ricardo I may come back I'm not going on yet well is there a week that's a good sign yes yes good job on that one or so guys one of the reason why a lot of customers wanna users are stack and they actually using Azure stack is because they want to use the public cloud technologies but they understand that some time going to the public cloud faces some constraints like compliance constraint or security concerns their organization may or may or may not have so you Ricardo gave you a good example of patterns that you can use to create your application your hobby application for example you keep your data local because let's say you have a compliance regulation and prevents you from putting your customer PII data to the public clock right depending which region that can happen fairly often so you have to keep it a very local but if your data stored in Azure SEC secure if you have gone downstairs to the booth of Azure stack you will see as your stack comes as a physical hardware appliance so can you trust it can you trust as your stack to create your application to put your very most private data most sensitive data or your most sensitive application and logic and all the good intellectual property you have on as your sack as a head of the Azure stack security I will say yes absolutely but don't take my word for it so I'm gonna walk you through the address execute posture and the compliance for Azure stack so that you will be able to make your decision where the azure stack is worth your trust for when it comes to security and compliance so this is the are key to address TOC architecture a lot of blue box a lot of connection cool stuff good news is you don't have to know it Azure stack architecture is internal and internals are internal meaning that you have no control on that you don't have to understand it you don't have to configure it you don't have to figure out which account talks with which component the lifecycle of that account which network connection you have to have how are you encrypt the connection and so on and so forth all of that is done for you and so when you look at the azure stack security Oh securing Azure stack the azure stack appliance comes secure comes pre hardened for you and so we designed this acute posture of azure stack fall into principle be hardened by default and assume breach and I'll walk you through those but one point I want to make it clear is that you or your Azure stack operator will have to manage for example do this security monitoring of as your sack and then when is really your responsibility is the tenant layer your application your workloads or virtual machines those are your responsibility to secure them unfortunately we from the product group we don't know what kind of application are going to deploy and operate so we provide best practices which are very similar or the same as a sure but at the end of the day you are responsible to securing those applications but the good news is you can focus on securing only that part you don't have to spend your cycle you don't have to spend your time trying to secure the infrastructure the infrastructure come pre hardened out-of-the-box I hope I'll be able to finish this presentation because this floor sounds squeaky so highly by default what does it mean it means that instead of and you know by Azure stack and then here's the 600 or 1000 pages manual of all the hardening practice you have to do we opted to fast with Azure stack it's ready to go you don't have to do anything to secure I'm talking about the blue box we saw earlier the infrastructure don't have to do anything it comes pre secure which means that you don't have to spend cycle figuring out how all those components work together and how to secure them and why we were able to do that is because in Azure stack we control anything we we design the hardware with our own partners design meaning we respect the hardware so we decide exactly well firmware well driver which operating system what the version whoa everything is deployed hirings configure and more so how everything is managed and by doing so we have full control of a whole experience so that we can seal the infrastructure because we know exactly how it's going to be accessed we know exactly the what's gonna go on inside the infrastructure so they put us in a very strong position when it comes to security right so for example a Windows Server regular operating system you have to deploy it and then it can be any unbounded number of configuration between hardware and software drivers application you run on top of it in Azure stack we remove the complexity we remove the combination and so we exactly know how it works and so I say we control the whole and to end from the hardware up so for the hardware again we could design Azure stack with our OEM partners and one other thing that we enforce and we require our OEM parts and to put ins inside every single Azure stack node it doesn't matter which I am it doesn't matter which region are the TPM to pono chips there are very few hardware out there but a few servers that you can buy today with the come with UVM TPM 2.0 and there applies also if you buy as you're stuck in China it applies also if you buy as your sack in Russia they will come with consistent TPM 2.0 chips they obviously will meet the regulation for that country and then of course the sake you boot a you fi but that's no news that's really a much standard but we obviously have those as well we also focus on reducing the attack surface so the only the only door opens are the one that we want to be open so we start from a very hard very tough security baseline and we basically pick the hardest we could possibly find which is the u.s. DoD Department defence security baseline which is called the DISA stick so as your stack or every hyper-v hosts and every virtual machines of the the infrastructure comes with a military-grade security baseline we remove all the components that we don't use from Windows and so on so that the attacks surf is reduced and we also have a lever all the windows security features one other one I mentioned here specifically is a code integrity code integrity which is part of the device guard umbrella is basically allows only the code that has been signed by the Microsoft or our OEMs to Ryan as your sack so if one of those many components you saw in the architectural diagram a second ago gets compromised for any reason the attacker will now be able to run mimic ads which is a exploit tool to steal credentials they will not be able to run an arbitrary PowerShell or whatever other language you like because none of those are signed by Microsoft therefore they will not be able to execute not only that if they try to do to execute them it will be flagged as with an alert therefore you detection will be much faster and just to give me an idea when we count we talk about detection the average industry for detection of a compromised is six months 180 days so your company could have been compromised five months ago and you will well be thin the average of the industry so we in Azure stock we're trying to push down then the value as much as we can by leveraging the fact that we know exactly was supposed to run so any software is not designed to run elastic should not be run and if somebody tries to run it we flag it so you detect a right away we also disabled a lot of legacy protocol here I just mention a couple them SMB v1 as a cell and we're working to the to do more about the secrets when you talk about secrets encryption and so on and so forth there is a lot of overhead that comes with it so first of all these work compliance also comes into play because in Azure sorry we understand we go in a lot of regulated environments we go into the financial industry don't you we are going into the military we go into the government we're going to insurance help healthcare providers all of them are extremely heavily regulated so therefore we've tried to address that as much as we could so they arrest encryption if you take any standards out there they all require the arrest encryption so it's by default in azure stack through BitLocker network encryption all those boxes that you saw in the architectural diagram they all communicate with TLS 1.2 only there for you old encryption inside all the communication inside the infrastructure is encrypted and we manage the certificates for encryption inside the infrastructure itself there is a certificate authority so all this certificate rotation can happen automatically we actually provided a script you can run as much as you want as frequently as you want and you rotate all the secrets to the infrastructure we also have one of the accounts I mean sorry the majority accounts use what we call GMS a group managed services account they are just regular services account but they are managed by the ad there is an internal ID inside as your sac those who are counter-rotate password every 24 hours that's a fastest days to put it by ad so if an attacker compromised one of those accounts they have 24 hours to exploit after that the past rotates automatically boom they are out again so that's sort of like the a lot of the infrastructure security we put in place and in terms of certificates and the others secrets those that you have have to run the script to rotate them the our North Star is to actually provide an autonomous rotation meanings that we put on a schedule internally and they've rotator as free clear as we can so that even that overhead is gone so you can focus and your team can focus on you on providing the value which is the applications not so much dealing with infrastructure in other words we want to give you cloud like experience like you have in Azure in as you don't go in Azure and rotate the certificate eaiser infrastructure that's done by Microsoft so we are trying to get there our North Star is to get to the same position with Azure stack but running solute data center they are the principal we follow for Azure stack is assumed breach assume which is the I will call it a modern or the new secure approach or in a new approach of security there's been basically put forward by the industry and Max as a champion on that and what that basically says is let's be honest we can be as good as we want and put as much security and hardness we want but if an attacker is well-funded enough and they have enough time they will eventually get in that's just the nature of the business and so instead of just focusing on the hardening of the perimeter which was the first day previous approaches security you put very beefy firewall on front and then you you have a very strong gate around or your fence around your infrastructure you actually do the same inside so it's sort of like usually a typical metaphor is you go from the castle with the huge high walls to the city where you have came as a door you have locks at the door you have the police running around and so on and so forth so instead of having the secured on the outside you also have you have the security across the board and so you focus not only in preventing the breach also in focus on the detection and mitigation and the first enemy where we have to defeat when it comes to compromise is the admin privileges I was an RSA conference two weeks ago if any of you was there at the keynote they they gave us a very interesting number 88% of the compromise today although actually both of the last year I think happened through one non credential eighty eight percent that means credential there has been stolen and guess which one is the easiest way to steal your credential phishing attacks they have 33 percent success rate making a little bills easy math let's say I send you three emails it's not exactly there but let's make it easier three emails and I get your credential so I'm three emails away from basically getting your domain admin credentials and when I have that I can do whatever I want in your infrastructure I can steal any data that your application have installed and at that point you're done so natural sack we simply remove that credential you as as your sack operator we as either Microsoft or do a.m. we do not have any security sorry any domain admin credential or any admin credential for that matter so if they steal your credential they only they steal our user credentials so as your sack can be managed as a user account it does not require a domain admin account it does not require an admin account as a matter of fact we call it the operator the azure stack operator we don't call it the other stack admin and this was possible because remember when I say we we shrink down we only enable the doors that we want we only open those as Jessica only has three three doors one is the portal we have two portals in our stack we have the tenant portal which is exactly the same as the one at Ricard to show you which is like the same as Escher and then we have the admin portal which is an admin experience we built for Azure stack where you can manage your infrastructure we will define interactions so you that's where you go for example to create to syndicate with a marketplace to build quotas to will offers to bring more down more services to update Azure stack so if somebody steals your credential yeah they may be able to turn off either sack and do a denial service attack that way but sure enough if you don't detect the summary turn off your appliance you have a bigger problem than the security itself right so but that to give you idea that that's where they go if you don't want to use the portal the admin portal then you go to the arm and you can use PowerShell command line whatever you like Python you name it whatever you want you can use that that expose the same actions the same functionalities of the admin portal as a matter of fact you have been portal calls armed to perform the action that exposes upon to click experience and third which is only for support cases there is what we call the PowerShell des or the privilege endpoint which leverages gia PowerShell gia and that is a whitelist of the PowerShell library so we only expose about 20 commandlets which are only able to bezel to get logs and perform some admin duties and to a via q factor auth between your operator and microsoft there is a way to sort of open the hood of azor sax or get inside infrastructure but again that's only through a ticket support we I mean there with support engineering and we are on the call with you and we will guide you through and then absolutely is scripted so transcript is so you will have it you will know everything happens those are the only way to interact with Azure stack everything else is sealed we come train blast radius by these privilege the account level I mentioned at the network acting we iterate every month we make it better we make it tighter and we have rule base interfaces so all those components you saw earlier they all communicate ear through rest or through PowerShell gia and so that if one component get compromised they cannot do a WMI call and perform any arbitrary action they want and again if one account got compromised there is no logging into hyper-v manager or cluster manager or service manager whatever you like there is only those three endpoints that I mentioned earlier auditing big deal when it comes to security and monitoring we centralized collect all the audits and we pre configures your stack you've prevailed the all this you need and we have a syslog client we're actually delivering next month that it will make it very simple to integrate any monitoring platform in the market so that was super security hopefully I was able to give you some idea what we have done for Azure stack for compliance one of the feedback was from customer compliance paperwork number one pay headache to go to production obviously for regulated environments so what we did in Azure stack since again we control the hardware and software and the entire infrastructure we call up an independent auditing firm to do a formal assessment of Azure stack for PCI payment card industry so if you use Visa MasterCard American Express in your application or anything else related to that you have to be PCI compliant we have all the documentation on how as you're sucking from infrastructure meets the PCI the applicable PCI requirements we also you block me does that block you yeah can you give me a one click there you go it's my life lies so I'm good so they laugh a second thing we did is we prefilled become cloud security alliance cloud control metrics which is a framework and meta mapping of to about 30 different international standards which include HIPAA healthcare industry FedRAMP if you want to be a service provider for the US Gulf which is also one of the most comprehensive cloud provider standards out there and ISO 27001 those are just there are 30 more in there so this documentation both the PCI and the cloud secure line CCM metrics you can and unload it for free from the service transporter and the link is here on the slide I last comment I wanna make just want to make clear we are not certifying Azure stack for these standards these are this is a difference between a janitor stack in Azure markets or owns and operates a j''r therefore we can address and we can meet the controls they are related to people and processes a lot of this tender have a lot of controls relate to people and processes in Azure stack you or your customer own and operate a sure sack therefore they have to the 35 your side what we have done it we have done a formal assessment and we provide all the documentation so to jumpstart your certification process on how either stack it's the applicable control related to the azure stack infrastructure which usually falls into the technology piece okay so you but for companies they already regulated people in process are already done because the same across all the application they have so real they the real Delta is going to be the application you develop and that's it doesn't matter when you run you will always have the Delta and with this I think we are over time so I want to thank you for your attention I hope this was interesting and we are here for question if until they kick us out otherwise we'll pick it from outside thank you [Applause] 