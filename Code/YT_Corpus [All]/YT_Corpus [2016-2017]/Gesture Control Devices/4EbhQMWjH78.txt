 hey everybody so we've got a quick easy application here for you today we are going to open a garage door with a widget on the home screen of our Android device there's an application out there already that allows you to do an HTTP POST request from a widget on the home screen of your Android device and we're going to use that to call a function on our particle controller our particle module is going to be plugged into a single relay controller here and we're going to use that relay on board to open the garage door so this is going to be a really simple application no coding required at all so let's get to it so the first thing you're going to want to do is you're going to want to install that application on your Android device so to get that you go to the Google Play Store and search for HTTP POST widget and so it should be here somewhere let's try a request there it is yeah the name of the application is HTTP request widget let's you do get and post requests function calls to the particle cloud to execute functions on the particle device are done through post requests so it is important that the applications forth that so you're going to want to install that on your Android phone and then we're going to flash the cloud control firmware onto the module plugged into our relay board so to flash that firmware in there we'll go over to build dot particle dot IO forward slash build you're going to want to make sure your device is selected if you have multiple devices you'll want to make sure it's selected with the star next to it and of course you want to make sure it's online indicated by the glowing sian LED here on the screen and the glowing Scion LED on the module itself so once that's selected we're gonna go to libraries and then under libraries you're gonna come down here to community libraries and you're gonna search for in cd1 relay that's for the single relay board of course if you have a two relay board for relay board a relay board the name is the same the number just changes so here under my libraries it shows up here for me because I'm the contributor for you you'll just search community libraries and it should pop right up once it pops up click to select it and then it will come up with four tabs control cloud control dot cpp loop test EVP and Sudheer relay dot cpp and NCT one relay h so we're gonna want to make sure cloud control dot cpp is selected and then we're going to click use this example and it will for that example into a local application on your code repo there and then you can flash it to the device so you would just at this point you just click the flash button and after it flashes you should see the flashing magenta LED on your photon module then it will reboot associate with your Wi-Fi network and then reassociate with the particle cloud so once you have that sian LED flashing again we are ready to go so now we need to figure out how to construct our post request so the easiest way to get to that is to go to Doc's particle IO and then we'll go to reference and then we're going to go to cloud API here and we'll expand that and then we'll expand devices and then we click on call a function this has got a basically a format for doing the request here they're doing it with curls so we'll have to kind of alter this a little bit to actually make it work with our device what I like to do is I like to copy all this so I would just copy this and then I'll email it to the address on my phone and then there's a couple other things that you're going to need we're going to need to know the ID of the device that we're executing this on so the idea of the particle module would just flash that firmware to and then we're going to need to know our access token you can go to particle build and then click on settings and here it will display your access token so you'll want to copy that and also put that in the email to yourself and then you're also going to want to get the ID advice so you click on devices they expand this and then you're going to want to get this device ID here and send that to yourself as well so you're gonna need all that on your phone in order to make all of this work so once you've got this already you've got all this stuff emailed to your phone it's time to start setting up the Android application so to use this application what we do is we simply click and hold somewhere on our home screen and then we'll click on widgets to add a widget and if you install that httprequest widget it will be available here as a widget you can add to your home screen so we'll click on the HTTP will click and hold on that HTTP widget and we'll drag it on to our home screen I'm and now we're into a spot here where we can actually enter the URL and the arguments and everything like that so at this point you would want to copy and paste in that that length that we sent over to ourselves so you can go into your email and get that and paste that in there actually you're going to want to get that before you go in here what you can do is you can just enter some dummy text in here for now and then click check and then we can go into our email and get all the information that we need so here we can copy this URL and then to edit this widget you actually open the app the HTTP app and your app drawer to open that up and we'll click on it here and then here we're going to paste in the text click and hold and we'll paste and then we need to delete a whole bunch of stuff here whoops and hold down it will delete at all we need to in this kind of text a second here you want to take off the access token on the end you want to take out the access token text and let's see we're gonna have control rewrite here on the end so the way that this should look and we also need to take this HTTP s colon forward slash forward slash at the beginning here off and you want to change this drop down here to HTTPS so what we want it to be is API dot particle dot IO /v one forward slash devices forward slash the ID of your device you would have gotten that from the particle build and then after that we want forward slash control relay would be the end of it so that's all you need on that line it should end with forward slash control relay now we need to change this down here from HTTP type from get to post and then we need to add click that little plus button we need to add some key value pairs here the first one is going to be Arg and the value for that is going to be momentary okay so that's it for that one we need to add another one this one the key is access underscore token and then the value is going to be that access token that you got from the build IDE under the general settings area so we'll just check this for now and then what I do is I go back into my email and I fortunately won't let me just copy it out as I'd kind of kind of did that wrong you know I would recommend setting that access token on a separate line to make it easier on yourself definitely helps and then we'll go back into the edit widget app and scroll back down here click the plus here again than access underscore token we need to enter the value here like that we'll click paste and we just want this this right here so we'll delete everything before that so put your access token in there and then click check or you can if you want to add an image to this widget you can do that you need to click on button with image and then you can go into your gallery on your phone I just ripped off an image from the internet here and I'm using that hopefully the creator of the image doesn't get too mad and then we click check and widget updated successfully so now we can we can go ahead and press our button here and we'll see that the relay comes on for 300 milliseconds and then turns back off which is the momentary function posted by that firmware so at that point we're all ready to take this thing down and wire it up to a garage door and actually see it in action so let's do that now here we can see the photon relay controller installed connections very easy just connect the common a normally open from the relay on the board to the contacts on your garage door opener generally there's an open outlet above the garage door opener so installation is very easy so here we'll hit the button and it opens the garage door right from a widget on the home screen of our Android device it's almost like magic isn't it you 