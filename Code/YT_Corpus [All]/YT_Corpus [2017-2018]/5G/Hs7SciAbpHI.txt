 My name is Sangkyo Shin and I'm a senior engineer at Keysight Technologies. In this video, I'll go over how to design a mmWave beamforming system with demonstrating a high-level modeling for the architectural design. The objectives of my presentation are first, to show a reference mmWave beamforming system model that consists of a baseband, rfic, mmWave channel and beam management controller. Then, we will create phased array RFIC behavioral models using both time domain and frequency domain simulation techniques and analyze exactly how they work. We will do some practical receive diversity system modeling and analyze the performance. As part of the design process today, I'll be using SystemVue workspaces that I built which allows me to quickly do architectural level design, and you can download this for free at the link shown in this video. I want to start by briefly reviewing how a hybrid beamforming procedure works for a reciprocal time division duplexing system. In this example, analog and digital beamforming is determined with a couple steps. Firstly, an analog beam generated using a sub-panel of total radiated power (TRP) antenna transmits orthogonal downlink reference signals. Then, the user equipment (UE) can measure this beam reference signal's received power and reports a beam index with the highest received power. Secondly, the TRP can determine the digital precoder based on the sounding reference signal and the reported analog beams. Because the time-division duplex (TDD) system transmissions take place over the same frequency, the uplink and downlink channel status are identical. Thus, the downlink channel to each UE ideally can be estimated in the uplink direction through the transmission of a sounding reference signal from the UEs. Finally, they can configure serving beams for the control and data transmission. Now let's create a beamforming system based on this scenario. This is a top-level schematic for a 28GHz layer one downlink communication design. My base station design on the left includes a baseband source and beamforming RFIC. The weight vectors for beam control come from this transmit beam management block which outputs the calculated weight table by receiving a beam status index from the UE's reporting thru the uplink control channel. Then the output beam direction will be changed dynamically during the simulation like this. Next, the transmitted beams will go thru the mmWave channel. The design of beamforming procedure should thoroughly consider the impact of channel characteristics of above 6-GHz. Therefore, I used a 3GPP TR38.901 channel model in this design. Coming to the UE side, it also sweeps the beam by tracking and acquisition process. Then, reports the beam index that has the highest received power to both the transmit and receive beam management blocks. Running the simulation, it shows the beams dynamically changing and it is the throughput analysis result with the beamforming. It is not possible to extrapolate end-to-end performance from traditional link simulation without beamforming. But now, you can use the example and modify for your own scenario with the beams. So now, let's talk about the phased array RFIC design. This is the common beamforming RFIC architecture having multiple phase shifters, attenuators and gain blocks that closely integrate with array antenna systems. In modern RF beam forming techniques, electronically tunable phase shifters are used to change beam direction and attenuator to achieve the required amplitude tapering to control the side lobe levels. Getting back to my schematic, this is a time domain behavioral model for beamforming RFIC. The incoming signal is upconverted to 28GHz and divided to 64 channels of individual signals using a splitter, magnitude and phases are dynamically updated by the control pins. Then all 64 signals are amplified and fed into each antenna element. These types of models are very useful for you to create a low-fidelity RF sub-system, but very quickly high-level architectural design in the early research phase. For more serious RF designers, I added another design that uses frequency domain simulation technology. The components used in this design will account for much more RF effects such as impedance mismatches, signal reverse transmissions, intermodulation products produced by the nonlinearities and mixers, thermal noise and phase noise effects. Running the simulation, we can analyze various metrics from beam pattern to cascaded gain to identify and address problem areas that improve system performance at an early design stage. Since RF devices are typically frequency dependent, experienced RF designers want to use S-parameters. This is an equivalent design using S-parameter data from circuit simulation or real measurement. In the case of the antenna model, you can import a far-field radiation pattern generated from electromagnetic simulation software to represent a realistic antenna effect, such as cross coupling and impedance mismatch. The sophistication of mmWave RFIC integration to the mobile application has grown considerably. You can even explore more real world situations using this simulation environment, and it's a very good starting point. For the mmWave 5G mobile handset design, various diversity techniques such as spatial, pattern and polarization diversities have been studied to achieve performance enhancements in lossy mmWave channel utilizing multiple antennas. Considering battery life, size restriction and complexity in mobile terminal design, I applied switched combining techniques as shown in the pictures. For the first case, incoming signals at the 28GHz microstrip patch antennas with the control of the beam angles by the RFICs, are fed in to the receiver. While the other case is the 4-way switching receive diversity with the mix of dipole and microstrip patch antennas for much more area coverage. The key difference in this approach compared to 4G terminal design is the beamforming. Let's create a 2-way receive diversity simulation model together. The base station transmission design is the same with the previous SISO example. In my assumption in this scenario, the propagation channels at two receive antenna locations are different, so I put two different 3GPP channel models in front of each beamforming RFIC with different cluster angle selection. It will make different channel characteristics at each branch of the UE receive path. Thus, the two RFICs must update beamforming weight vector during beam acquisition and tracking phase to align the beams at the right angle. If you select the receiver mode to diversity, the receiver is switched to other branches when the signal level is lower than a predefined threshold. The throughput versus SNR sweep analysis shows you the performance gain achieved by the switching diversity in red, compared to single branch receive in green and blue. And this is 4-way switching diversity case. Actually, this type of architectural system modeling method that I'm describing today gives a great insight into the issue, rather than just guessing. And, that's a mmWave beamforming communication system. I have shown a beam management procedure and a reference design at the system level included with 3GPP mmWave channel model. As the phased array RFIC requires continuous update of phase and magnitude and need to address various RF effects, dynamic data flow and cross domain simulation are crucial in early architectural design. The receive diversity case shown is a good reason why you should do this simulation in the early design phase, because it then allows you to make the right decision for the antenna topology and system architecture. The workspaces you've seen here include mandatory building blocks for beam-based physical layer link simulation, you can download that at the link below. And if you want to get even more advanced, try to explore more examples that ship with the SystemVue 2017 release now to get a head start with your 5G communications system design. I'm Sangkyo Shin at Keysight EDA, and thanks for watching! 