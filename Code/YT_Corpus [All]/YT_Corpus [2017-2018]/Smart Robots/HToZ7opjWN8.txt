 my name's Sam I'm a tester here at tyro or I was a tester until I left two weeks ago I'm in between jobs at the moment and I start a new job at Google in a week so I feel like this conference kind of talks to me now but yeah I feel a little bit out of the ordinary a tester at a developer conference I guess we're like your evil twin we always point out the flaws in your hard earned work unfortunately but I can also have a bit of fun with testing as well so this is a robot that's an open-source project that you can use for testing we've helps if I switch things on properly we've named this robots happy mocked up face there was a competition here at tyro to name it during a hackathon so I'm actually going to jump straight into the demo first and then talk about the robot afterwards so [Music] you're all on TV now Christmas [Music] just some more music yeah [Music] we have some timing issues with that robot at the moment but hopefully you could recognize the song now back to my slides where are we so this is a robot that you can use to test mobile apps it's an open source project you can access the repository here with all of the 3d files as well based on version 2 also created by this guy Jason Huggins who was one of the founders of the selenium framework as well so I think he just wanted to that's like an earlier prototype version where you could use it to interact on a tablet and I think that demo version he was using it to play Angry Birds all the parts the green parts and whatnot a 3d printable I printed them here in the office we got a 3d printer a couple of weeks ago to give out at Yale next week and I was able to get some parts printed they use a bit beam which is a Lego compatible pieces when it when they say Lego compatible they don't really mean Lego compatible it doesn't actually work I tested it they're just roughly the same size but they don't click very well they're very similar to the LEGO Technic pieces they're also not as durable as Lego pieces I guess because as you print it you tend to optimize for build times rather than having solid plastic as well it took about 20 hours worth of printing for all those bring parts so it wasn't a quick thing to do I also screwed up my first print this was the results of the first print it went a little bit haywire note to self do not put prints near the edge of the printer let that one the hard time hard way all of the larger parts I could have printed but I actually got them laser cut at a hackerspace robots and dinosaurs in Meadowbank if you've ever been inclined to check out a hackerspace I quite like that one we use and there's an Arduino board and it's connected to three servo motors and those the rotation gets translated into XYZ coordinates on the phone plane we also use magnets and ball bearings for joints this way this way yeah there we go it took actually about two days to build once I had all the parts printed so I spent a day in the hacker space assembling a lot of the parts and then maybe about two afternoons as well after work so it didn't actually take that long to build once I found the instructions it cost about $300 in Parts I was following the recipe so I was ordering from American science and the postage was a lot more expensive I think if I had found Australian dealers it would be a lot cheaper maybe around the 200 250 mark but I've spent more on LEGO robots before so I guess it's not that bad we also hacked that play piano music and about one and a half day hackathon the hackathon was a christmas-themed one two weeks ago here at taro so that's why we've got Rudolf with his red nose LED playing in time to the music because it was a bit of a nice Christmas touch but to extend the Christmas theme we had this morning it runs on the Arduino you run for Marta now Fermata is a protocol to control microcontrollers from another computer so we're actually running the code from our local machine and there's a protocol that translates it into Arduino code I'm also running a neuro JavaScript server and you saw the play piano was a JavaScript class we have I have that JavaScript class on my github repository repository as well if you want to have a play around with them also we use the johnny-five API which is a JavaScript for Internet of Things it doesn't have the full suite of JavaScript available at your disposal what I'm losing stuff and this is a fairly new library it's only been around for a couple of years but also the tapster robot I think there's only been on github for a couple of years as well so it's all fairly new and experimental but it was a lot of fun to build we mapped out our X Y Zed coordinates of all of our keys you can see right at the top there we have a four to represent the e four key on our keyboard we have X Y Z to map for when it's pressed and when it's lifted so that when we're moving from key to key we actually move from lifted position to lifted position before we triggered the press and that's why there's some timing issues when we're trying to play faster music such as the Darth Vader music because we don't quite have the timing right yet it's playing the quick notes too slowly and the longer notes too quickly but it's a still a bit of a hack [Music] unfortunately our keys are hard hard-coded then we also pass in a string that represents music so that merry christmas' that we've got 2 D 3 there at the start that means play the D 3 note 4 for two sixteenths of the bar how many of you guys are familiar with music could read sheet music and okay we just tried to programmatically represent music and pass in a string that all we have to do is pass off to the to the robot and it knows how to play it because we've mapped out all the XYZ coordinates of all the keys and and and whatnot so how can this help you test I can see at least two main applications the the UI automation on a physical device one thing I would like to build next is if you had an app running in debug mode you should be able to read the UI elements via USB if you had some sort of layer that converted them to XYZ coordinates then you could translate them to the I haven't built that part yet I don't know how hard it would be but it doesn't sound that hard right but that's what most tech it always sounds easier than when you actually get to do it I think also if you wanted to do extended performance testing or load testing on a real device you could set this up to be clicking the same button over and over and over again for four hours at a time actually I noticed with this app is a keyboard app because it's a free app we when we were using it for our testing during the hackathon we would miss keys a lot of the time especially if we had it running for like an hour or two so I found a performance issue in this in this app but because it's free it's I kind of expect some bugs I guess I think someone was telling me one of the ideas they had for this robot potential applications is snapchat doesn't allow you to line up chats it doesn't allow you to post them at a different time with this robot you might be able to do that you might be able to set it up so you could post your snapchats at 1 a.m. or 5 a.m. or or tweet when you're asleep are there any other applications that other people can think of off the top of their head sorry could you please for a bit louder okay use some image processing to read sheet music and then palm it off to the to the robot hopefully its you're only limited by your imagination it has some testing applications I think as our tools progress so they tend to get better and more reflective so anyway it was a lot of fun to build my lessons learned while I was building this it was really hard to find instructions to build they're a little bit all over the internet they weren't located in the github repository so that was interesting but I did find some instructions I print I think I printed a few too many parts and I think it's because there was a bit of a difference between the build of materials in the github repository and the build instructions that also meant I ordered too many bolts of one type and not enough also because of these differences between the builder materials and the instructions that I was following so all the parts were because this is an American project all the nuts and bolts were in inches and you know threads per inch and and measurements that I didn't really understand so I didn't I wanted to try the American nuts and bolts first before trying metric but then ended up moving towards metric nuts and bolts so one thing I'd like to do is to build a create a building materials for metric system and also to update the instructions and the build of materials as well that's basically it in a nutshell any questions so far how about multi-touch I was actually just thinking that this morning that at the moment it doesn't support multi-touch I you'd have to reach Iggy the design a little bit because where the stylus is being held at the moment if you had to styluses right there they wouldn't be able to really touch close together so the pinch and zoom might be a bit challenging to do as well but I guess with a bit of time you could probably figure something out at the moment as just a single touch yes so the question was is it possible to move the pen and record the movements with the current JavaScript it's not but one of the things I wanted to experiment with was if we disabled the motors because right now they're locked into position so if we disabled them and allowed you to you could record the rotation from each motor as you moved it around it it's possible because I've seen that with like now robots and whatnot but the in the current source code it's not supported yeah yeah it would be much easier to do the testing one of the things I found with the JavaScript is that it makes debugging Hardware a bit easier as well there was this go function that allows you to go to XYZ coordinates and by getting the X Y Zed corner answers of a couple of keys you could see the the delta or the difference between the keys and then you could use that to map out all the other coordinates so that actually wasn't that hard I thought we would spend a lot more time doing config and calibration who would like to come up and have a play there's another function if I simplify the keyboard we've got a play function where you can just pass in a string of characters and it will play it to the music [Music] [Music] so this one here will play c4 one note d4 two notes and efore four notes does anyone have any other music that they'd like to play on this keyboard setup we also have I think jingle bells [Music] [Music] and I just noticed we're about 17 minutes in so we've got plenty of time left yeah so the the question was with different phone sizes and screen sizes how would you calibrate it to know where the keys are at the moment it's just hard coded to my phone I think if you didn't have access to a debug build it would be a little bit more challenging you would either have to set up some sort of camera setup to be able to read the screen and translate them into XYZ coordinates but I think the easiest way potentially is to read the screen via the USB get the X Y Zed coordinates of UI elements and then translate them to the robot that hasn't been built yet but that's where I'd like to see you go yes so the question was with the iPhone does it support the pressure touch is that the correct the force touch there's no way to read the pressure from the server motors but you could someone's giving me a phone call I just get the robot to answer it if you could map out the Z coordinates based on the amount of pressure but it would require a bit of trial and error and it would be hard-coded be dependent on the length of the stylus you're using as well so I don't know of a programmatic way to be able to get that with the current setup because the server motors they could probably tell you how far the screen is down and then you might be able to tweak it with a small Delta either side to get a light touch and a force touch one of the things you could do potentially before you start playing around with the phone is to do a calibration where it just goes around the whole phone and and gets the dimensions of the phone anything that it presses further is where the edge roughly is so you could do that programmatically as well to get where the phone is located they were in the sorry yeah would everything be compatible if you want to deport that on to a pie if you ported that to a pie I can't see why not because we're just it really depends how you get JavaScript talking to pie but because johnny-five already talks to a raspberry pie as well as Arduino it shouldn't be that hard and second question is there anything to stop you running node directly on the adrenal board on this Arduino you can't run no directly but there is another Arduino board or not Arduino board but there is another board that's kind of in between Arduino and Raspberry Pi that runs JavaScript natively thanks bring it off by the way thanks firstly awesome talk Congrats and my question is more around John five thing and what's the next step that did you are added unity testing that or thinking improve your code what I'll think about it what's why I think about 25 and unit testing and potentially next steps for your application I would like to see just a translation layer in between running unit you not unit UI tests from a machine to the robot I think the tools while we're developing for unit testing I don't see this replacing that at any point because I think the tools we've been using for unit testing have developed they're kind of mature ish now and I'm the developers on my old team we're always of the mantra that unit tests should be quick to build quick to execute so they if you abstract your code in such a way that you can execute your unit tests separate from the UI then that makes them faster you could use this for unit testing but it would be very slow and I would say because you've got added hardware as well it's prone to more error over time I mean like we know that UI tests are flaky generally because things are always changing with a robot it would make introduce even more flakiness and false positives so I I don't actually see it being used for that does that help Thanks 