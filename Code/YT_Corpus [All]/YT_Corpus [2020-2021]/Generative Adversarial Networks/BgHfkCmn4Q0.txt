 Hi, I’m Janina and I’m the project manager at ZIB. I will introduce you to the challenges of gas transport and to our forecasting system. Hi I’m Thorsten. I’m the technical lead and I will show you how our system works. Hi my name is Julian and I’m the product owner at OGE for this project. I will explain to you the business impact for my company. Here is our mission: We are given a huge legacy infrastructure. For the energy vendor and to grow all renewable, germany passed the network development plan, calling for building new infrastructure for two billion dollars. Our goal was to use analytics to build algorithms that support computer assistant intelligent dynamic control of the network instead of building additional pipelines. The german gas transport system is located in the center of europe. The majority of the gas comes from russia and norway and needs to be transported through the german network. Germany is the european gas hub. Only half of the gas entering germany is actually consumed here. The other half is transship to secure the supply of western and southern europe. The liberalization of the european gas market in 2009 posed novel and difficult problems to transmission system operators. From the trader's point of view the gas network is just a point, the virtual trading point, where you can induce or extract gas from. Limits are given by capacity products, either the orders of film capacity, which means guaranteed to be delivered or flexible, which means the order will be processed best effort. The only other limitation is that traders need to make sure inflow and outflow are balanced over the full day. From the transmission system operator's point of view the network is the complex network. They have to ensure that all transport requirements of gas traders and consumers are met, even if this means gas induced in the north and immediately consumed in the south. Thereby a transport market of about 2 billion dollars enables gas trading market of more than 54 billion dollars. The biggest german transmission system operator for gas is Open Grid Europe that controls a network of 12 000 kilometers. This is similar to the size of the german Autobahn. To control the system dispatchers operate about 100 compressor units with more than 3000 valves. Keep in mind that this is a network built during the last 100 years and the oldest still operational part built in 1916. There's no computer readable description and it is not stuffed with sensors. This is solid engineering with thousand tons of steel. Currently the dispatching center is run based on measured data which is only available in hindsight and the experience of the individual dispatchers. A major challenge is the security of the gas supply. With the help of a high-end decision support system OGE wants to meet these challenges and ensure safe efficient and cost-effective gas transport. Because there's no comprehensive solution available on the market OGE started the project optimized execution of dispatching. The result of this project contributes to several levels of the OG strategy. It makes an enormously important contribution to the sustainability of the company, especially since there is no comparable product on the market that solves our challenges. With the help of descriptive analytics methods it is possible for us to face the challenges of the future with composure. For example past experiences cannot be transferred to the safe transport of hydrogen. Employees cannot scale increasing complexity and scope at will. Therefore it is essential for OGE to have a decision support system in place to adapt to upcoming changes such as market consolidation and the european energy transition. OGE has invested more than 20 million US Dollar in the development of the system over the past five years. And OGE has committed to continue the development cooperation for another 5 years. Savings of 1 billion US Dollar can be achieved only for germany due to the better network control and avoiding network expansion. This is a great economic benefit. Here are the main deliverables we have in the project: First we needed a high precision gas flow prediction. The system we implemented is 34 percent more accurate than the solution OGE had before. It is in operation now since 2018 and continuously improved. When germany is going all renewable there may come a day where the sun doesn't shine and the wind doesn't blow. To ensure the security of supply several gas-powered power stations are declared system relevant, sitting on standby. If needed these can jump into operation in less than one hour to provide gigawatts of power, but at the same time they will instantly start drawing large amounts of gas out of the system. As you have seen the traders only have to balance their accounts on a daily basis. Now imagine the situation that the power station draws gas in the morning while the supplied gas is only fed into the network at a distant entry in the evening. Such a situation can endanger the security of supply. One solution would be to build new pipelines and indeed the governmental network extension plan asked OGE to spend 690 million dollar for this, as one kilometer of pipeline costs roughly 1.5 million. To not have to bury this amount of money into the ground OGE developed a new product called firm dynamically allocable capacity, FDAC. Basically the same as a previous firm capacity product but with one catch. Now if OGE sees difficulties looming it can restrict the power station to get their gas from a few previously designated safe high supply entries. But to make this work a system was needed that continuously monitors and analyzes the situation in the network and detects possible trouble several hours ahead. FDAC is based on our improved forecast system and also in operation since 2018. Now the final goal is to build kind of a navigation and driver assist system for the dispatching. We call it compass. Every 15 minutes it analyzes the situation, computes optimized control decisions and gives recommendations to the dispatchers. Forward-looking command and control optimize solutions that can cope with future demands, as the incorporation of hydrogen and ammonia. This system is now deployed and has been integrated into the OGE IT infrastructure. We are currently in a stabilization phase where we continuously improve performance and analyze and check all the data delivered and the recommendations that are computed. At an early stage the MODAL power plant product tool enables OGE to recognize when the supply of a gas-fired power plant can no longer reliably guaranteed from all points of the network and must be made from the specified entry point. With a secure supply of gas-fired power plants we are making a significant contribution to the success of the energy system transformation. This picture shows our overall solution approach for the compass system. First the forecasting runs we'll discuss the details how this works later on. The system has two stages: The so called network flow optimization uses an aggregated network and a comparatively simple station model. It decides with a global view on how to overall route the flow and where to compress a gas. Afterwards at each station we use a detailed model to find the precise decisions and operation modes to realize the flows computed by the flow optimization. Each station is rather special and specific and has to be modeled individually. Some are easy and simple and others are nightmares of complexity. At the end the computed actions are combined and recommendations are given to the dispatchers. Obviously our system has to run 24/7 as gas is transported all the time. The situation continuously changes. So we compute an update of the recommendations every 15 minutes. First we have to collect all the new data coming in. Currently there are three external systems which are connected by nine different interfaces to our system. Based on this an initial state of the system is constructed. Since there are different time delays with the data transmissions from the sensors, the view of the system we get is hardly ever consistent. For example you close a valve but the flow sensor is not yet updated when we start the run and still reports a substantial flow. So the first challenge is to devise a consistent and likely correct state of the system. Then we run several characteristics trying to find any feasible solution fast. With whatever we have now we start our main mixed integer linear programming based flow model. Actually this is of course a non-linear problem but we have linearized the model to speed it up. This way we compute an optimized overall decision on the flows for several time steps in the future. These results then define the demand curves for the individual compressor stations. And now we compute the stations in parallel. Again we try heuristics first. For example we are currently experimenting with a deep neural network heuristic based on generative adversary network architecture. Results so far are promising and we believe this will allow us to scale up our approach better. Basically the neural network tries to learn to guess the correct solutions to the ? ? ? ? ? unverständlich xxxxxxxx of the integer program. Then we run the precise mixed integer optimization model for each station, taking all details into account as good as we can. Finally the optimized actions computed for each station are combined, smoothed and post-processed into recommendations to the dispatchers. Here you see some of the underlying mathematical optimization model we built. Please keep in mind we are not just computing one setting of control decisions, but a timed sequence that keeps the network operation operating efficient. Here you can see the elements of the model: the objective function, the momentum equation, the pipeline pressure loss, here are the resistor constraints, modeling of the valves and regulators. This is part of the model of the compressor station, and here you see the station section. This is a general flow model with a flow conservation and demands, the exit pressure constraints, and the flow direction. We assume several simplifications such as isothermality, and a constant friction factor in the pipes to derive this linear formulation. Unfortunately the full model is computationally intractable even for small networks, and those we came up with a two-stage approach I showed you. Each part is dealing with one of the complexity sources: the overall transient gas flow on the one hand, and the detailed combinatorics at the junctions, that is the compressor stations on the other. Let me show you a few more details: On the left hand side you can see the full OGE network. Currently we consider the subnetwork in the south west of germany since it already captures all topological features in particular big cycle. It also includes two of the biggest and most complex stations of the whole network. Applying network reduction techniques we compute the network shown in the middle. As you can see the number of pipes and valves we have to deal with is much reduced. So 151 of the 964 pipes are left, 24 of the 81 valves, none of the resistors is left, but all the compressors are still there. Imagine it like distilling the network so it's smaller with a higher density of relevant features. Here a simplified model of each station is incorporated. In the zoom we can see the station at Gernsheim and how it’s model look like. This is a simplified model used in the overall flow computation. Solving the transient flow problem for this network we derive flow directions and course control decisions at the stations, which then have to be detailed and validated in the subsequent step. Let's look at one of the most complex stations: Gernsheim. All these buildings you see on the left picture are just one compressor station. On the right you see a schematic view: You see the outgoing arcs and at each arc is a command profile over time, computed by the flow model, like the one shown here. As mentioned before, taking into account each possible state for each actively controllable element of the station, we end up with 30 quadrillion possible combinations. From these there are about 200 000 technical valid combinations, so-called operation modes, based on the knowledge of the dispatchers. Analyzing historical data we were able to reduce this number to 1285 necessary operation modes, covering nearly all technical feasible options. These were just the discrete decisions. Once an operation mode is chosen there are several connected continuous values that have to be determined accordingly. And remember we have 40 of these stations, though most are a bit easier than Gernsheim. Here you can see a demonstration showing the result of the computations for a station. On the left diagram the colors show the pressure level of the pipes. The amount of flow is indicated by the thickness of the lines, and the arrows show the direction. What you can see here is a reverse of the flow over time in a station. On the right you see the current operating point within a simplified characteristic diagram for two of the compressor machines. As with all engines there is a feasible operating range. Here it is defined by input pressure, input flow, and desired output pressure. Then depending on the drive of the compressor there is a certain optimal operation range, where the machine runs most efficiently. I won't go into details, the whole thing is rather involved. The performance of the compressor even depends on the outside air temperature. You can make this arbitrarily complex. We spend a lot of effort to come up with a simplification that can be computed reasonably fast, and let us stay within the feasible bounds, and favors the optimal operating point. With our first version we run extensive tests. As can be seen in the diagram the biggest station has over fifty thousand variables. Those are the dimensions of the solution space. More than forty thousand of the variables are binary allowing for more than two to the power of forty thousand different solutions. There is no way to explicitly enumerate all possibilities before the universe collapses. Still we are able to come up with even optimal solutions fast. As you can see in the left diagram a successful run takes about 20 minutes for the flow model to finish and varies between the individual station models from about 5 to 20 seconds. As seen on the upper right hand side a test set of more than 5000 runs provides successful calculations in more than 90% of the instances. To feed the navi with future gas demand and supply for up to 24 hours —those being the boundary conditions of the prescriptive problem— we have to forecast the flow at more than a thousand different entries and exits. As they represent various types of transport customers, ranging from power plants, border points, to other countries, to industrial end users, their statistical characteristics differ a lot. So obviously one forecast method will not do the deal. And since the navi needs online results we need a computationally very efficient method. First from past flows we detect the relevance for each point. This detection is actually done online. So whether a point is considered relevant may change from one day to the other. Then we solve the most relevant points with sophisticated forecast models, using computationally less expensive models for the less important points. For the most relevant points we use a combination of linear programming and mixed integer optimization. For this purpose we analyzed the time series, detecting the most relevant features influencing the flow, such as yesterday's flows at the same hour, outside temperature change, working day, etc. However, as you can see in this heat map displaying correlations between the different features, some of them are connected to a certain extent, which again varies from node to node. In an offline computation we solved a mixed integer program to select the optimal feature set: for each node for each hour of each weekday. This is very similar to finding spa solutions with lasso but works better for our problem. For the online part of the forecast system we then solve a linear program, minimizing the error by calculating weights for the optimal set of features based on a shorter history compared to the offline part. The MODAL natural gas flow forecast is used daily at OGE. It significantly exceeds the quality of our previous forecasting system. Here is a summary of our use of analytics. We started with analyzing the existing infrastructure and its behavior. This is an ongoing effort, there's always one network element more that has to be taken care of. After building models on various levels, we built a system to predict future flows at the thousand border points of the network. Building on top of the description and the prediction, we devised the complex algorithmic system to prescribe optimized decisions. This is an effort of a large team of researchers at the ZUSE Institute, and our international academic partners at Open Grid Europe and at other companies, like the software developers at Soptim and LBW. Thank you very much for your attention! 