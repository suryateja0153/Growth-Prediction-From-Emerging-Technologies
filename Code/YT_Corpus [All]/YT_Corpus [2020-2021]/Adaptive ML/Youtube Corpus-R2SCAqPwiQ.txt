 - Hi, this is Dana Kaufman, and I'm a Program Manager Lead in the Identity Security and Protection Group. - My name is Alex Esibov. I'm also a Program Manager. I'm on the Microsoft Cloud App Security Team. - And today we're here to talk to you about how using CASBs in conjunction with identity systems can provide comprehensive security for our customers' cloud environments and their user bases. So it's been an interesting last eight months. With the pandemic and COVID, you know the world has changed the way enterprises work now and their employees has evolved. And now, almost everybody is working from home these days. Bad actors have taken this opportunity in the shift to try to hide their actions and their malicious acts within the kind of the chaos that ensued from the shift. So, since the beginning of this year, we've seen a 230% increase in password spray brute force attacks, which is one of the more common attacks we observed. We've seen just last month, 5.8 billion attempts at compromise on our identity systems. And, we flagged about nine million sign-ins that we deemed were high risk of compromise just in August alone. So, you can see that attackers have really elevated their activity to try to take advantage of this shift. So what is working from home look like? So usually you have, in enterprises you have users that are on-prem, they're within the firewall, they're using cloud apps or local on-prem apps, but the way they collaborate, most of their coworkers are there with them, they might be remote but coming through the same network. Now, in work from home scenarios, you have your employees at home using, accessing corporate resources from either the home network or public networks if they're able to go out. They're using their personal devices or whatever devices they have access to to get their work done. Instead of before, where they had managed corporate devices that they were using to do their work, and they're accessing on-prem and web apps from their homes. And lastly, with the shift, they used to go in the office, meet with their peer employees or their managers, they interact with their customers or their partners, they would come for visits right on-prem. Now everything is done remotely. So all partners and customers are done via external collaboration and meetings are done remotely, content sharing is done remotely. So with this shift, how do companies protect themselves? So what we want them to do is to adopt a zero trust architecture or zero trust posture. This is not a product. It's a way of structuring your security. And there's three principles that we talk about when talking about zero trust. The first is to verify explicitly. You need to know who the user is, if it's the user that's supposed to be authenticating, it is the one that authenticates, and the one that's supposed to be accessing the resources. You need to know if they're coming from the device that you expect them from, and the device is what you thought it was. So verify explicitly, first principle. Second principle is to use least-privileged access which means any user that authenticate is just the user. Even if they're an admin, when they authenticate, when they get access, they just have user privileges. If they need to do administrative actions, they can use just-in-time access, request access, elevate their administrative access, and then eventually it gets removed right after they're done with their work. So have those processes in place. By keeping users as just user access, even administrators, you basically limit the blast area or the surface area that attackers can actually gain if they get into an enterprise. And the last thing you need to do is assume breach. You should assume that you were breached a month ago, seven days ago, you will be breached in two days, and you need to have visibility across your cloud platform and pulled together in like a SEIM system or one location so that you can see anomalous detections as they happen, you could see attacks as they happen or right after, have visibility in what's going on and be able to find this bad activity as soon as it happens. So Alex, we talked about the principles, how can customers actually protect themselves and apply these principles? - [Alex] Yeah, absolutely. So this slide paints a picture, an architecture, of the principles that Dana just talked about. So what you'll see on this slide are six foundational elements for Zero Trust. On the left, we have those conditions that start a session. Who is the user? What is their identity? What device are they coming from? In this time of remote work that's unprecedented, we're scrambling to provide users with access and often doing it from unmanaged devices or their personal devices. So all of that context. At the center, you see the security policy enforcement engine that's taking all of the information about the user, about the device, what they're trying to reach, and their associated risk, and deeming what kind of access the user is allowed to have to which components. So on the right we see, for example, data, we see applications, we see infrastructure and network. Now we could spend a significant amount of time digging into every single one of these foundational elements of Zero Trust. In this talk, what we're going to do is focus on the left-hand side on the Identities, on the right-hand side on the Applications, and how that central security policy enforcement engine brings this together so it all works in sync and in step. Now if you've joined us before, this is our third talk in this series, you know that we always talk about why identity and access management solutions and Cloud Access Security Brokers or IAMs and CASBs work better together and belong together. In our case with Azure Active Directory and Microsoft Cloud App Security, we're actually able to bring this to life to you, to merge these products, to solve actual use cases. And so these are the use cases that we focused on. In the past, you've seen us talk about the discovery of Shadow IT, and once you've discovered it, how you put those applications under management. Once those applications are under management, we've talked about granular and adaptive real-time controls for user sessions. Should we allow access, block access, require multifactor authentication, require granular controls like blocking downloads or something else? The real-time analysis that we're able to do against threats as well as the automated intelligence and remediation based on our identity protection platforms and our UEBA engines. We as Microsoft, like I mentioned, are uniquely positioned to provide value in all of these with the integrations between Azure AD and Cloud Apps Security. In this talk, it's unprecedented as well during these times. We have some reduced time to talk to you. So we're going to hyper-focus on those first three scenarios. And in the next few minutes, we'll bring them to life with some demos. For this first demo, what we'd like to show you is the ability to manage app consent in your environment. Administrators really want to reduce the surface area of the various applications that their users have consented to. And by combining Azure Active Directory with Cloud App Security, we can ensure that both future permissions that are consented to by users are low risk, and we can retroactively go in and revoke any applications that are over permissioned or particularly risky. So I'll walk you through how you're able to do this. We'll start off in the Azure Active Directory portal. Here we're on the Enterprise applications page, and we can see under the "Security" section, there's this "Consent and Permissions" page. And here we can see "User Consent settings". And what we see is that users right now by default, are allowed to have access or consent to any application. And I would like to change that to this recommended policy, which still lets my users grant permissions to verified publishers but only if those verified publishers also require permissions that are classified as low impact. So I'm going to switch to the setting and will show you what these permissions actually look like. By clicking on this eight permissions classified as low impact, I can go in and I can see which permissions specifically are falling into this designation. And I'm also able to add other permissions. And this greatly reduces that landscape of potential attacks, because now users, as opposed to being able to consent to any app can only consent to applications from verified publishers with these example permissions that are classified as low risk. In tandem, we're working with Cloud App Security. And in Cloud App Security, we can go in and actually look at all the applications that have been granted permissions to Office 365, G Suite, and Salesforce. In this case there's this application that's clearly malicious called Google with two zeros instead of two O's. And I can see that this Google application was actually authorized by an administrator, which means that it was consented on behalf of all of the organization users. And I can see that the permission level is high. I can go in and learn more about the application, what the website of the application is, what permissions were actually granted. And I can also see what the community use was like, and I can see that in this case, it's rare. So seeing that this is a risky app, I can go in and push this banned button, and this will actually mark the application as banned. I can also go in and I can create an automated policy. And this automated policy will allow me to say for any application in the future with these kind of permission levels or low community use, I can automatically ban those applications and revoke my user's ability to access them. In this second demo, we're going to talk about user risk and how we mediate that risk through a series of different actions that we can take depending on if the user risk is medium or high. So for this first part of the demo, I'm going to show what policies we've configured to act on both medium and high-risk users. We're back in the Azure Active Directory portal, this time on the Conditional Access page. And we can see that we've got this policy to Route Risky Rick to Cloud App Security when the user risk is medium. We can see that we've included specific users, in this case, that's Risky Rick. For the purposes of this demo, we've decided to go with SharePoint Online specifically, but of course this can be applied to all apps. And importantly in these conditions, you can see that I've got this user risk field, and I've set this policy to apply to Rick when their user risk is specifically medium. And furthermore, I can see that my control is to use Conditional Access App Control. This is an amazing integration between these products where the Cloud App Security policy is actually built right into Azure Active Directory's conditional access feature. So I can say I want to route all of this traffic through Cloud Apps Security's reverse proxy and apply additional controls to that traffic. Once Cloud App Security receives that traffic, we need to know what to be able to do with it. So what you're looking at here is the policy that we've created. In this case we're saying whenever we get traffic handed off to us for Risky Rick from Azure Active Directory, we're going to check if a file that Rick is downloading is sensitive. What does sensitive mean? It can mean a lot of things, but in this case we're specifically looking at whether there's a classification label with Microsoft Information Protection that deemed this file to be of particularly confidential nature. And if the file does match one of those classification labels, the action that we'll take is to block download, and we'll serve this custom message for Rick saying, "Hey, we've detected unusual activity, because he's medium risk, please contact your administrator for more information." Now if Rick is a medium-risk user, we'll let him download. We'll let him into the app but block these downloads. But if he's a high-risk user, we wanna go one step further. So what you see here is the exact same policy you saw for medium risk, except this time the user risk that we've chosen is high and the corresponding action is different. Rather than routing him through the proxy but letting him into the application, we're saying, "Yeah, we'll grant you access, but first please, we require a password change. And along with that, we require you to multifactor authenticate to prove that you are who you say you are." - [Dana] So I'm now the bad actor. I'm logging into Risky Rick's account. Now Rick's a bad boy and reuses the same password on multiple systems. And as a bad actor, I discovered his account, his username and password on the dark web. So I'm going to log in. And one of the things about it though is I don't know Rick's actual location, so I'm actually logging in from a location that the system will consider unfamiliar. And so my risk will go to medium risk because Identity Protection detects that. So I logged in as Rick. I'm going into SharePoint. Now SharePoint's up and I'm going to download, I'm looking at the files and I see a list of Social Security Numbers in a word doc. So I'm going to download that as a bad actor. Interesting file. So when I hit Download, we can see the MCAS policy kick in. So what happened? The Identity Protection determined that the authentication was medium risk. It then passed the policy over to MCAS which was monitoring what is happening in the application, and it saw sensitive download, the user is medium risk, so it blocked that download. - [Alex] Alright, so back to the administrator's perspective. Rick just came in from a risky session and tried to download a sensitive document. Thankfully, we showed you those policies that are not only enforcing the blocked download, but actually also creating alerts. So as an administrator, I got a text that there was a new alert. I came into the "Alerts" page, and I see at the very top here, this blocked download of sensitive files when user risk is medium by Risky Rick, and I say, "Huh, that's interesting". So risk has gone to medium-risk user. I can go into this policy and I can see that not only was he medium risk, but he also proceeded to download that SSN document from this IP address that's considered risky. So with all of this in mind, I say, hey, Rick is pretty clearly compromised. And the action that I want to take is I actually want to go in and confirm that this user is compromised. So I'm clicking this option here, and we'll see how Cloud Apps Security again works together with Azure AD to ensure that this end-to-end use case is enabled. - [Dana] Okay, so now I'm the valid user trying to get into my account, and this time I'm trying to get into my team site on the web. So I log in, and the user is at high risk, and so the user risk policy kicks in and it asks me am I authenticator to approve. So I approve that. And now logged in, it requires me to change my password. So it challenged the user to make sure that only a valid user will get by the challenge, and then the valid user then resets their password which means the bad actor can no longer access the account. Okay, for this last demo, I wanna show how MCAS can block malware file uploads or downloads in real time. And you configure this just like the other policies that we looked at. So I'm a bad actor and I got into Charles's OneDrive, I've logged in through tour. And so I'm going to try to upload a file to this user's OneDrive to hopefully spread malware across the organization. So what I do is here's my malware file. I'm just going to drag and drop it into the OneDrive dialog, and just wait a second as the file upload starts. And you can see MCAS recognized the malware and then blocked the upload for it. So we covered some great scenarios on how you can use Azure Active Directory and Microsoft Cloud App Security together to better protect enterprise cloud environments and the users trying to access those cloud environments. There's a bunch of new features that have come out in the last few months in both Azure AD and MCAS that customers should be aware of. The first set is in Azure AD Identity Protection. We're releasing all new real-time session risk engine based on ML. The ML risk scores each authentication as it happens in less than one millisecond, and it improves the accuracy of those real-time risk detections by 23%. which offers our customers even better real-time prevention to stop attacks as they happen. I also mentioned earlier that password spray was one of the more common brute force attacks that we run into. We added a ML-based password spray detection in Identity Protection. So there's a new risk event called password spray. Now in Azure AD Application Protection, we released a publisher verification process to stop and try to prevent applications that are potentially rogue from being published. We also added app consent policies to better control who can consent to applications. There was also risk-based consent protection added which basically requires a step-up when during the consent process, there's risk detected. So that would require an admin to actually approve the consent. And then lastly, we added the ability to report suspicious consent requests to better protect our customers from rogue-type applications. Now there's a bunch of other Microsoft Cloud App Security enhancements that have just been released. Alex, you wanna cover some of those? - [Alex] Yeah, absolutely. So in the Microsoft Cloud App Security sphere, I'll touch a little bit on the new threat detections that we've added as well as the new real-time controls which you actually just saw in a demo. So in the threat detection space, this first one, the command and control over email, we've seen a lot of nation-state attacks recently that are using compromised attacks to actually communicate malware to different enterprises. In the BI space, so that second one, we've seen that BI platforms have become a very popular tool for malicious insiders exfiltrating sensitive data like sales reports, for examples, that were meant for a vendor. Then we've seen this VM and storage resource deletion. So we've seen these rogue admin activities with escalated privileges that result in these bulk deletions of various types of storage resources and subsequently halting startup operations for a lot of different enterprises. In the Oauth App attacks space, we've now seen this shift towards the SaaS in the dark net where these different accounts are being groomed to basically exfiltrate a bunch of account usage and sensitive data. And finally, attackers compromising government environments through the use of cloud storage as an entry point to corporate endpoints. So we've seen especially in government environments that to be the case recently, and we've added a bunch of different threat detections to mitigate against all of those parameters. And in the new control space, you saw this already, but previously our solution was meant and aimed at targeting sensitive data and preventing that from being uploaded or downloaded. Now we've augmented that with malware detection like you saw in the last example. So we can detect the hash of the file compared against a known database of hashes, and decide whether to block or allow that upload or download in real time. Alright, so we'd like to leave you with a few Go Dos that you can implement right away in the short term and a little bit further out in time as well as some resources that help. So in terms of things that you can do right away to start securing your environment and implementing those strategies of Zero Trust, the first thing that we recommend you do is to review your Azure AD Identity Protection reports. Following that, you can create CA or conditional access policies aimed at both user and session risk like we discussed here today in report only mode, so that you can learn about what kind of effects those policies would have specifically in your environment. We didn't talk about it here but we mentioned one of the important pieces of this whole puzzle is to actually look at your shadow IT. What are your users using in your organization, generate a report that summarizes all of that. So once you've implemented all of that in the shorter term, in about a month time frame or so, you can continue to use that conditional access policy engine that we discussed, and then tomorrow to start blocking legacy authentication. On top of that, you can leverage the same conditional access user risk policies to actually do secure password reset on high risk like we demoed for you. And in Cloud App Security, you can enable app connectors to get very, very deep visibility into specific actions and anomalies that are taking place in your Microsoft 365 environment as well as AWS, GCP, and many, many more SaaS applications. And in the six-month time frame, we can expand those conditional access session risk policies to challenge for multifactor authentication on medium risk, as well as we can start implementing those finer-grade session controls to block data exfiltration for risky users as well as other risky situations. And finally, here's some more resources to help you get started with all of this. We mentioned how tightly Azure Active Directory and Microsoft Cloud App Security work together, and you can learn more about both of these products by visiting their technical documentations in each of the respective first links as well as the blog posts for both products that were recently published. And of course, don't forget to enable multifactor authentication across your organization. We sent you a little link down at the bottom for that. And most of all, thank you for taking this time to learn from us even if it happens to be remote this year. - [Dana] Yes, thanks everyone for joining us. 