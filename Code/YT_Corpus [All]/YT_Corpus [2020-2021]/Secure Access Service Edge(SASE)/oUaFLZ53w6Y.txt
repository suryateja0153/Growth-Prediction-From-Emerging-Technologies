 hey guys welcome back notchkazzy here in today's video i'm going to talk about cisco sd when you will get to learn a lot about how the cisco sd-wan solution operates we'll do a deep dive into the architecture and the different elements of the sd-van fabric and how the different elements operate and come together to create this beautiful cisco sd-wan it's the viptela solution it's not the meraki just want to clarify that you'll enjoy and if you want to learn about the fundamentals of sd-wan or sdn i will provide the links down in the description below are you ready it's gonna be an exciting one i am super pumped let's roll let's jump right into it here's the overview of the different topics i plan on covering today number one cisco sd-wan architecture two key design elements three planning a migration and finally i'll wrap it up with a quick overview of the cisco sd-wan appliance portfolio so let's quickly look at the cisco sd-wan architecture at the heart of it we got the underlay and all the blue boxes that you're seeing on the screen are the routers which we now call sd-wan appliances we used to call them routers now we call them as demand appliances because they're much more than your traditional routers because of the capabilities they offer and then we have different transport we could have mpls circuits coming in internet circuits 4g 5g lte and all that combined together they make up the data plane and these routers or these sd-wan appliances could be physical or virtual uh through the magic of ztp or zero touch provisioning they can automatically come up and we'll talk about ztp in a bit and they could be on premise or in the cloud so they could be physically located at our branch locations and data centers they could also be located in the cloud or you can have a combination of of the two to the right of the screen i want to draw your attention to the multi-cloud on-ramp it's basically a performance measurement capability that's taken into account to find the best path to the different sas and is providers so sas being salesforce.com and o365 and is being aws and azure and gcp and the idea is that there are constant http pings and dns requests sent to each of those providers to see over which path assuming we had multiple pads to those providers which path is performing the best and then making sure that we use that path as primary the second element security so security with the sd-wan appliances could either be local or cloud-based because these sd-wan appliances that cisco offers have pretty robust security capabilities they can act as a firewall for you as a single box solution and we'll discuss more details in a bit but you could do that either on the boxes or you could redirect traffic through service chaining to the cloud for the traffic to be inspected the last element here is the application qoe or quality of experience this is the secret sauce that comes with the viptela solutions the cisco acquired a company called viptela a couple of years ago they were sd-wan specialists and that's what gave cisco the ability to have a very robust sd-wan capability and this quality of experience score is a combination of packet loss and latency and it's measured for different apps over multiple pads and once again the idea is to identify which path is performing the best has the least latency and the least packet loss so we can use that as the primary the next element in our sd-man architecture is the control plane so remember guys the whole idea of the software defined networking in general is to separate the data plane from the control plane why do we want to do that well the reason we do that is because it gets easier for us to deploy things we don't have to touch each and every device hop by hop we can do that centrally that's why you want to take the control plane out and put it on a controller which in this case are v smart controllers that cisco offers these v-smart controllers communicate directly with the edge appliances at the bottom of the screen and these v-smart controllers are able to push the routing configuration down security configuration down and this scale horizontally which is basically a scale out model which means um as you continue to add more appliances to your locations and as you continue to expand your business you can spin up additional v-smart controllers to be able to handle the additional load because each v-smart controller can only handle so many sd-wan appliances in x number of tunnels the third element here is the management plane and with the management plane which you get is a single pane of glass where you can configure the entire environment monitor troubleshoot what it is is it's a portal the customer can use the browser of their choice chrome or safari you log in and you get a nice gui and through that gui you start to configure devices and there's like a one-time setup that you have to do the very first time you log into vmanage but then after that you have to configure templates and things of that nature but that's where everything happens and then the role-based access control is also set up there if you want to give access different types of access to different people within the organization some people read only others rewrite vmanage also supports third-party automation so if you have chef puppet ansible you can use those automation tools to feed the scripts into the vmanage so the vmanage can then talk to the vsmart controllers to push the configs down to the devices at the bottom of the screen so it's really really interesting and cool and then to the right of the screen you see v analytics that's another type of controller that allows customers to have uh deep analytics about the environment v analytics uses ml or machine learning and is capable of analyzing the entire environment for bandwidth forecasting reasons and also keeping your service provider honest because it tells you the uptime the downtime you can use those reports and talk to your service provider the analytics also gives you some insight into how the applications are performing the next element i want to draw your attention to is the different type of controllers that the cisco sd-wan has so there are three controllers all together like i alluded to a little bit ago v manage is the portal that you log into and this is where everything happens right this is where you configure everything we smart you don't touch but vsmart talks to vmanage and v-bond also talks to vmanage v-smart is used to actually manage all the routers and it uses omp or overlay management protocol that allows you to communicate with all the different sd-wan appliances and um and this is how vsmart is able to configure you know all the routing and security and the different type of policies that you have set up and v-bond is the controller that's used to authenticate and authorize the devices so they can connect to the sd-wan fabric the very first time device comes up it must talk to the v-bond controller and unless it's authorized it gets rejected and we'll get into some of those details momentarily but these are the three different controllers that are part of the overall controller architecture there are two deployment mechanisms mechanism number one less desired is the on-prem controller model where the customer takes these three controllers as vms and you can use the hypervisor of your choice vmware microsoft kvm whatever have you you can go ahead and run these as vms not recommended though because you have to worry about the infrastructure that it's running on and then the vms and the right amount of memory and all that and then you also have to worry about redundancy as well creates more complexity in your environment what's recommended is cloud delivered model where cisco deploys the controllers for you and all you do is log in to the vmanage portal and then configure your sd-wan fabric it's that simple 99 of the customers go with the cloud delivered model and just so you know most of the sd-wan vendors on a global scale uh offer cloud delivered solutions some do not have an on-premise capability something to keep in mind now let's look at the zero touch provisioning or ztp explained in four steps step number one when vh comes online for the very first time okay you unboxed it you plugged it in it first goes and speaks with v bond over dtls tunnel okay v bond v bond is a white list model and what it does it looks at the serial number and the digital certificate that's it it's already programmed with and it matches the device's serial and the digital certificate to make sure everything matches and if the private key matches on the digital certificate side of the house and the serial number matches then it gets authorized and the v bond then redirects that v edge to the v manage nv smart however if the serial number or the digital certificate do not match then the device gets rejected so that's an important step okay so security is very key in this whole design step number two after being authenticated by vbond one starts communicating with vmanage it establishes a dtls or tls tunnel with vmanage and just so you know the difference between dtls and tls dtls is for udp traffic and tls is for tcp and assuming that we have already set up our templates and vmanage the entire configuration for that v edge gets pushed down by the vmanage controller like magic and all of its interfaces come online it gets configured gets all the ip addresses all the routing information security everything step number three what ends up happening here is that the v edge starts talking to the v smart and v smart once again there's a dtls slash tls tunnel established and what ends up happening is vsmart establishes an omp session and that's the overlay management protocol that's a secret sauce routing protocol think of it as bgp on steroids because bgp does not carry security information whereas omp has the ability to carry security information along with routing information so it's a lot more capable than bgp and the final step step number four is where the two v edges start talking to each other over ipsec tunnel now notice the difference here we're no longer doing dtls or tls channel now we're doing an ipv ipsec tunnel and another important element to keep in mind is there's a bfd session or bi-directional forwarding detection session established between the v edges and the reason for that is for a quick failover to happen as soon as a path goes down bfd immediately switches the path over in a sub-second now let's look at the cisco sd-man key design elements first off let's look at overlay vpns and topologies so in this diagram here we have the edge to the left and we have v edge to the right in the middle we have transport and it doesn't matter whether we have mpls internet 4g whatever because remember the whole idea of sd-wan is the um we're no longer dependent on the underlay transport we could care less about the underlay it's all about the overlay well how are the overlays formed well you see the abc these are the three different vpns that are created and vpns are essentially vrfs or verbs these are virtual routing and forwarding tables they're completely separate these vpns don't talk to each other by default you can make them talk to each other but by default they don't talk to each other so if you have some compliance requirements in your network like pci and others you can create a separate vpn to handle that traffic and create that separation and be compliant and what's exciting here guys is each vpn can have its own topology so here for example vpna which is red could have a full mesh the green vpn b could be a hub and spoke and the yellow vpnc could be partial mesh or point to point so it gives you a ton of flexibility to pick a topology that best matches your business needs now from a traffic engineering perspective we have a couple of different options option number one which is the default option that's active active load sharing now one thing to keep in mind it's per session based not per packet so once a session is formed either or mpls or internet for the life of that session that session will always take the same path but then when the next session is required a different path is taken so this is how the load sharing is accomplished the next element here is weighted so for example if you have a 10 meg mpls circuit versus 100 meg internet circuit you would want to send for every 10 packets you send on the internet you would want to send one packet on mpls that can be configured using per session weighted model the next one is application pinning here if you have real time traffic like voice and video you can always pin it to mpls regardless of how great internet is performing because you're paying a ton of money on mpls you may go you know what for my real-time traffic i will always use mpls no matter what and when mpls goes away then i would use internet as a backup that can be done the last one up is application aware routing and that's my favorite one it's sla compliant sla stands for service level agreement what that means is under vmanage we configure a policy for our voice where we say we cannot go below a certain threshold and we define that threshold latency jitter loss we define all those parameters and then if those parameters are violated or the sla is violated i should say we switch the traffic over to the other link um so this is pretty neat and i think because we have what's called dpi or deep packet inspection capability we have the luxury of using sla compliance now from a high availability and redundancy perspective depending on how your site is set up if it's layer 2 we can do vrp if it's layer 3 we can use ospf or bgp on the lan side of the house for transport we can fail over any of the paths not an issue from a head-end redundancy perspective we can have redundant appliances at the data center and you can have a single appliance at the branch with multiple circuits coming in and we can fail over either over a circuit or we can also tolerate a hardware failure and from a controller perspective of course we would want to have multiple controllers running on our environment so we're able to fail over if any of the vsmart controllers were to fail from a security standpoint cisco has i believe compared to some of the other sd-wan vendors a pretty big advantage they have the full capability of running an enterprise firewall an ips url filtering advanced malware protection secure internet get gateway or sig in ssl proxy all on a single box you don't need another box so i call that a one box solution so if you're trying to save money and consolidate hardware footprint and you don't want to maintain yet another piece of hardware at all of your locations you can get rid of your existing firewalls and consolidate that security functionality onto the cisco sd-man appliances but a quick word of caution though if you do that make sure you do a lot of engineering homework and you look at the throughput and the performance numbers and you pick the right type of boxes because what ends up happening is when you start enabling advanced security features cpu starts to take a big hit and at that point your box is not going to perform at the marketing threshold that you see on cisco's website right you really have to know how the sd-wan appliance behaves when all the different bells and whistles are turned on and most likely would have to go one level up or in some cases two levels up to make sure that you have the right type of hardware appliances to be able to handle the overall load another very important element that is very near and dear to my heart is planning the migration from your traditional van over to the sd-wan that's a big step so how does that work let's look at some of the elements that we should consider before we migrate first we need to look at controllers as a customer we need to decide what type of deployment model we want to have 99 of the customers go with cloud hosted but if you have some strong regulations and you must have them hosted on-prem you do have that choice but you have to make that call ahead of time also we have to decide what kind of redundancy we would want also we have to look at the scale of the controllers right we have to look at how many sites we have and how many tunnels are going to be created and then figure out how many controllers we would need and then make sure we have redundancy on top of it and from a controller high availability standpoint or redundancy standpoint we need to make sure that not only the v smart but the v bond and the v manage all of those controllers are actually highly available and redundant and finally firewall ports so we need to enable certain ports on our firewall to allow the controllers to talk to each other and also allow the controllers to speak to the sdn appliances there's a lot of communication that is happening back and forth with all these different network elements within the sd-wan fabric i will provide link in the video description so check that out to the firewall ports and some of the other configuration configuration elements that you should consider next element is the data center so we have to look at do we have any new circuits in the design or are we dealing with existing circuits you have to look at the overall design are we talking full mesh hub and spoke you have to look at routing we have to look at traffic engineering we have to look at the different policy requirements quality of service different slas that we have to consider all that needs to be taken into consideration same thing with the branch side we have to see are we dealing with existing underlay or are we going to have new circuits coming in as part of the redesign or the re-architecture or the upgrade also we have to look at the different applications and application flow we also have to look at the design full mesh hub and spoke and all that we also have to look at the policy are we going to do local internet breakout at each branch or do we want to backhaul the traffic to the data center a lot of the customers these days are taking advantage of the local internet breakout but that that does mean that you have to really consider your security policy because you may have a central security policy model today you may have to look at a distributed security model and we also have to consider access to sas and is applications and and see whether or not you can benefit from that optimization and licensing smart account virtual account make sure it's all tied together because the entire sd van fabric is kind of tied into the smart and virtual account so it's very important that you have a grasp on that and also the cpe ownership in other words who is going to be the owner of record when it comes to the sd-man appliances are you as a customer in charge or have you hired a third party to manage your environment if you have a managed services provider who manages your environment then we have to take into consideration how the devices are going to be managed and if you're actually going to hire professional services or advanced services to configure your sd man we have to look at how that ownership is going to play into the overall scheme of things and here's how the migration sequence looks like the first thing we want to do is you want to set up all the controllers first then we want to turn up our data centers and finally we start bringing the branch locations into the sd-man fabric from a high level kind of a super high level sd-wan transition strategy perspective at the branch locations what you want to do first is that if you have two sites site a at the bottom and side b at the top we would want to replace the internet routers with the sd-n appliances first and set up our secure tunnel then what we do is we already have a tunnel established over the internet we set up an extended tunnel over mpls so this way we have redundant tunnels in case the internet goes down we can continue to operate over mpls and then finally this is the ultimate nirvana stage where we are completely migrated over to sd-wan both mpls and internet and that's the ideal place you would want to be but for most of the customers it takes a while to get to that stage depending on how many sites you have and the final thing i want to talk about today is the sd-wan appliance portfolio so for branch and aggregation we have the traditional cisco routers the isrs and the asrs the isr 1000 is a small box you can get in different form factors like a desktop or maybe like a venue type box depending on your needs and it's able to terminate a different type of dsl circuits 4g lte things of that nature suited for small to medium businesses isr 4ks on the other hand are suited for medium to large enterprises and branch locations primarily and they're capable of handling voice modules and ucs e modules as well and there's also a power supply redundancy so you start getting some hardware level redundancy at the isr level and asrs are the big boys these are primarily targeted toward data center hq locations and locations that have very high bandwidth needs now the box below is viptela os isr-1k is the only box that is capable of running the viptela os the acquisition of fiptela allowed cisco to inherit these vh boxes you're looking at on your screen so these came from viptela cisco didn't get rid of them they're still here you have a choice to either pick between the v-edge boxes or the isr boxes it's your choice the difference being isrs have the ability to run security whereas v edges do not have the ability to run uh security capabilities so if you're looking to deploy security then you need to look at the isr boxes virtualization so there are two very interesting boxes the encs or the enterprise network compute system 5000 and csp cloud services platform 5000 these two boxes are actually x86 type boxes that have the ability to run virtual network functions so you can spin up multiple virtual routers and virtual firewalls and virtual walls for optimization and things of that nature and you can host third-party vnfs and it allows you to have a lot of flexibility it's primarily targeted toward edge computing model where you have really large stores or branch locations where you need sort of like a data center type virtualization model but instead of going to the cloud you have high speed low latency needs at the access level so these boxes get you that and finally we have the cloud and this is where the aws azure gcp comes into play if you're using the traditional isr routers or asr routers then then you would want to get the csr 1000v or csr1k to be spun up in one of these clouds but if you're using the viptela os and the v edge boxes then you would want to get the v edge cloud box to be spun up for you in one of these infrastructure as a service provider's cloud and that wraps up today's video i hope you guys enjoyed today's video if you did give me a thumbs up hit subscribe and i'll see you in the next video 