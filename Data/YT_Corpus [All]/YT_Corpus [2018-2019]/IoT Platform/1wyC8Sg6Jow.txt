 hi everyone welcome thanks for joining us on this second day of build I hope you are enjoying your event I knew you guys were only here for the button we did give away some of the buttons and we had someone the booth we had a line actually at 10 a.m. before before the booth area opened just for us thanks very much for the attention I have good news and bad news good news is that you can buy the buttons online from the textmode website now bad news that's coming from Germany it's expensive so we're working with the guys from text mode to get the prices down so you'll be able to buy them we'll still have something like a hundred and something tomorrow morning on the booth we're creating the demand every day some more buttons for you guys to come over and over again will be three of us talking today I'm not Andrew I'm the last one in list andrew will be talking just after me chris will take over to close with cool demos the idea of this session is to introduce you to what we call the platform services for azure IOT and then tell you more details what this is about if you have questions and one interrupts you can I think superfast usually especially if I have a lot of demos and two guys bigger than me are waiting to take the podium so I'm going to try and answer your questions I might not see you though because we have big lights here but you can also reserve your questions for the end and we can answer them we are on Twitter as well if you want to find us we cannot hide or in plain sight you can find us over there on these aliases I'll introduce what we call the platform services for azure IOT we'll talk about IOT hub I'll talk about device provisioning service and then I'll hand over to Andrew for time series insights and then to crease for Azure Maps you happen to have the 2 p.m. for these two fantastic products here so you can grill them on everything there I'm not the PM for IT Help don't grill me so you but the few of you will have a button that was at the entrance don't try and set it up because it's already set up to connect to the mics of Wi-Fi here and to send a message to specific IOT above ours so that we can track you during the no we're not tracking you during event what are you gonna do actually speed something fun if you like something during the session click on the button that's an experiment maybe Wi-Fi will drop maybe it's gonna be a catastrophe I will look ridiculous when I will bring up the webpage that shows your clicks but if you're happy with a session you like something you click and then we'll see something will happen as mentioned on the slide don't click on it like your life depends on it right buttons have a nice battery lifespan I think they they will last 500 clicks I'd be happy if battery's dead at the end of this session that means we're doing a good job I don't think you're gonna have time to click you'll see the green light that's gonna flash that means it's trying to find Wi-Fi if it's successful at connecting to that idea been sending message I was finished with a steady green light and then off if it fails maybe red and we can blame the Wi-Fi ok so azure IOT we are talking about tons of things wait we talked about rit for those of you who were at sam session yesterday how many of you went to sam session and you got a button right not all damn it so we we talked about lots of things during that session we're gonna drill down a bit deeper into some of these things we are talking now about as RIT in three areas the first one is solutions so we have solutions that some for some of them are turnkey type of experiences SAS type of experiences that will help you get started in minutes and when we say minutes you can come down to our IOT central booth and you'll see how fast you can set up an IOT central application and start connecting devices start sending data applying rules displaying that data in real time and then triggering flows in your work in your line of business application and then we have the IOT the azure IOT solution accelerators previously known as as I see RIT sweet it's a set of pre-configured solutions and allow you to get started faster with past services that then are deployed onto your own Azure subscription and then you can go and customize at will the platform services are these past services if you want to think of it as a box of Lego's right you like legos you're going to aggregate these fantastic pieces of Legos to create your IOT application all the way from device management up to triggering you know workflows and other processes in your line of business application and back to the devices obviously and we'll talk about these platform services today and then we have the edge area an edge covers a lot of things there's a surety edge which is the framework that allows you to run cloud compute on to the device but also to manage an application on a device from the platform our IOT hub but we also now talk about as your sphere or Windows IOT as part of our edge story edge is anything that is not on the cloud that is device right so let me dive a bit more into details about what these are right solutions I mentioned azure IOT central and we have IOT solution accelerators as well on the edge side as your IT edge and I mentioned today these will be covered in these two other sessions right that are later today for the RIT edge one and on day three for the solutions session right so will not dive into too many details here it's already covered on the platform services side of things Azure ad as tons of past services that will help you building your app in the cloud these four ones are the ones that are really tagged IOT which doesn't mean that it cannot use other services such as as your function stream analytics and others in your IOT application azure IOT hub is your gateway to the client for devices that's the gatekeeper that's the one that authenticates devices that's the one that holds and maintains the digital representation of your device in the client that we call device twins that's the one that you will interact with to manage your devices using some of the primitives we'll describe today azure IOT device provisioning service is that service that will lie you to provision devices at skill at an IOT scale and we'll get into some of the details about DPS and I'll show you a little demo of that as your time series into fast time series insights is about exploring analyzing time series data when device is sent to lemon tree data up to the cloud they usually stamp that data was a time in it so that actually you can rewind in time and see what the data was some time ago and we will dive into time series insights and show some cool demos especially for developers with things that you might not have seen yet as your Maps we actually had location-based services you might have seen Chris on some of our Asha Friday videos or the IOT show talking about the agile location-based services it's now called Azure maps and you'll know everything about maps in a second don't forget to grow him as your IOT up let me dive into this one so that's your gateway for devices to connect to the cloud it's one pass service you will instantiate that into the cloud into your Azure subscription we have various cues for this service we have a free one that actually allows you to send 8,000 messages a day and then we have paying ones with different tiers I'm not going to get into details there we have our fantastic you know marketing and in other p.m. party up on the boost and you'll be able to get some information from there from them about the pricing but basically you can go very very cheap on connecting your devices to the cloud we actually recently in that one I want to mention that we actually are create a new basic SKU which intends to address scenarios where you don't need to do anything else then send telemetry message lots of customers were using event hub for that because it was way cheaper than IOT hub and instead of making event have more expensive we made out of cheaper and that's basic SKU allow you to do telemetry and authentication so you get all the goodness of an hub which is low price but you get all the goodness of idea which is safe authentication and security for your devices happy to answer more so I tab is that service that you'll connect your devices whether directly whether through a gateway right because not all devices talk Internet azure IOT hub is a cloud service it needs to have a internet connection in terms of connecting the device to the cloud if you use a field gateway that field gateway will be the one that will interact with IOT hub on your behalf or on the devices behalf these devices will connect to that field gateway using field bus protocol such as bacnet can in others what you can do as well for devices that don't talk any of these protocols or you don't want to have a field gateway you can actually instantiate your own cloud protocol translator in the cloud we have some samples for that last but not least you can do all of that together a feel gateway that doesn't connect directly to IOT hub but uses a cloud gateway we're seeing less and less actually customers willing to have this cloud gateway because they want to have more and more of the devices connected directly or through an edge gateway that can talk directly to iti but it's easier to manage you know I have to spin up a VM with that Cloud gateway translator and at the end of day you end up like you know having more to maintain so that's what's happening on the device side of things you also have a huge amount of api's on the cloud side of things for you to interact with that device gateway right which is that hub in the cloud so you can manage your list of devices you can send messages to devices you can update what we call the device twins and I'm gonna mention and talk about it in a little these management apps and the interactions related to you as an admin can be done in the cloud from a web app or can be done from a mobile or PC app is the exact same way for interacting was IOT hub we provide API so obviously for the service on the cloud side of things there are STP is on the device side of things are using mqtt or AMQP protocol with an option for HTTP that doesn't give you bi directionality and doesn't support the device tweens and methods which is something you might want to use so device side is mostly AMQP MQTT protocols the choice is yours cloud side is a superest to make your life easier we provide open source SDKs but and if the kids are not just wrappers around the arrest epi is around AMQP or and cooties are actually way richer than that they implement logic for retrying connectivity and sending messages this is something that is not very trivial on devices so the rich white logic is very powerful in the SDKs allow you to fine-tune what does we try logic you're looking for in the world of devices is something you don't want to do is we try at the same interval forever if you do that with your buttons because you're loving this session you'll see the battery ash was going to die pretty fast and the say well if someone comes back was a dead battery to me I'll give him a new button okay and we'll send the data about the button clicks to evaluation so that's going to get the scores out here that's what we gonna do and so I lost mine so open source has to case we try logic super-powerful and devices can implement is retry logic such as exponential back off with jitter something that allows you to eventually not have all devices trying to reconnect together you know at the exact same microsecond because they are two in the same way you want to add some jittering the way devices reconnect as the case take care of that for you we have SDKs for see we have SDKs for c-sharp for Java for Python we we offer them as open source to accept external contributions we support Windows with support Linux and we have the C SDK working on many microcontrollers out there we can leverage and Arduino library as well we have packages nougat NPM we are on maven we have apt-get and so on right if you guys have seen the VC package manager thing it is pretty cool that just not support Linux and we're working with them to have a VC package as well for a C SDK so that's the SDK that's how's your RT hub once you have devices connected and can manage them well hook that up to anything so the idea of exposes endpoints one default endpoint which is an event hub endpoint they can actually just like get high throughput of data through but then you can create these custom endpoints you can add more event hubs you can also add endpoints such as storage or you also have service bus cues and topics that he can out there and we're working on having integration was ven grades as well so that he can't have IOT hub being a provider to event grade scenarios where you'll be able to trigger something in a van green from IOT hub so that's the way you're gonna integrate IOT hub in the rest of your application you're gonna look at these endpoints and you're creating new ones when you need some and you're gonna hook that up to the rest of the world we have a feature in IT hub which is called routing that allows you to go into the messages that device is sent and eventually also their demise twins and based on that content you'll wrap the messages so if you have a device that is sending a message that into the header has a alert tag you can set a rule in IOT hub that says for every messages that has this tag in the header of the message I'm gonna send to that specific endpoint so then you can create advanced polls where you have alerts eventually that are managed in a hot past like immediately trigger a flow and things are not alerts or more telemetry you don't care about where you want to come to later then you can you can actually funnel them to a storage to cosmos DB to something for later in a little or actually to come back to them later so you can do that with IOT hub no need to hook up your own application behind it will filter the messages that is done in IOT hub and ITR can do that at a very high throughput can only go and open the messages look at the content of the messages and supports various formats like JSON and others and we'll look at what's in there and we'll determine the scoring on the rules you set based on that content and so you can imagine we're talking about IOT scenarios that's a huge amount of data is going to come up the ITA observers can ingest that and can also analyze that on-the-fly automatic device management or the theater session is going to talk about this it's a new thing that we have which builds on top of the twins that allow you to do this configuration of devices in an automatic way dealt with by IOT hub so I invite you to go to this session he doesn't have buttons but the guy's super cool still presenting really well what this is about and you can really among questions about device management in general because once again Chris Green was presenting that is the PM for device management okay stop talking get to the demo unlock the machine it doesn't recognize me that's funny okay I'm number six right so the first thing I want to do is show you how you can create an IT hub right that's the basics some of us like to go through the portal and do create resource select internal thanks big IOT hub and go through the full thing I'm not one of them oops what's going on let's try again no I'm still duplicating let's try and switch here No yeah it's weird cuz I was number seven I'm number six here as long as we have a screen I'll be happy right or not and someone come over for the AV problem Oh stay away from it right it's read another can someone help me I okay I was gonna not help for Dennis oh you all come here and watch my screen all right we'll do life plug in plug outs I've only one HDMI fantastic like David ass and I'm not dancing promise okay so I was saying it did burn some of my demo or actually some of Andrews or Chris's cuz they are behind me so I'm not I'm not that portal guy you might be the portal has all the options it's one thing at a time I actually invite you to go check out the azure CLI v2 so we have a iot extension for a terrestrial ID it will allow you to deal with hub stuff with the my stuff it has both control plane and data plane so you can actually work with devices or simulate a device send a message things like that but you can also manage your IT hub you can create new hubs create device identity is and all that using address July we also have PowerShell support for the control plane stuff and we're adding the data plane stuff soon so you'll be able to do all that as well so if I look real quick at some other ones on the device side of things you'll see a bunch of commands here that are about creating device IDs listening to device IDs on a specific hub you can simulate your device so that means you can actually set a JSON piece of information and single it device sending that JSON on a regular basis directly from common line using Azure CLI v2 alright so that's pretty cool that's an extension you can find to Azure CLI so I've looked on github for as your CLI extension for IOT or azure IOT extension for CLI something like that and you'll figure it out so once you have an IT hub you have one way of working with it which is with the portal once again in that portal you'll be able to look at what's going on in terms of the device connected the data is going through and you see here I have four hundred thousand messages Lad daily I'm paying for that IT hub even if it's just for demos you have the shared access policies which is interesting to look at because that's the part where you define working access on the service side of things we can change a device registry we can send messages to device from the back and this is that was with this shared access policies devices on their side they are managed through this IOT devices Explorer and in there you have all the device identities that have been created obviously I have only two so I don't need to use the queries but if I had to I would be able to assign tags in the device Twain so device Twain just because I'm mentioning that a lot the Weisse twin is that digital representation of a device it's a JSON file that is maintained by a IOT hub and that it's synchronized each time a device connects and it has notion of tags which is a property that only the backend can see not the devices and that allows you to group devices and to address them in groups and eventually to query them in in this tool or in your API S or in the SDKs and then you have a notion of reported properties which is what the device says it is reporting as a state and desired properties which is the set of properties you want the devices to apply right so what's going on is that the device will connect using the SDK or not but using the SDKs better because you don't have to control that logic of synchronizes that JSON file and dealing with differences and so on and and the backhand actually will synchronize it well with with your application by notifying a new reported properties or ID and one important thing about the rise to it device tween is about the last-known state of a device if a temperature for example we put it through Twain changes three times while the device is offline when it comes back online you don't have the history you have the latest value right and that's very useful for seeing that are actually not a telemetry based thing right so twins is really about state of a device last-known state or desired property so next time the device will connect it will apply that desired property you chose if you change it three times before the device comebacks online it's gonna actually just apply the last one make sense okay and I will show you a little bit about the West Wing so you can here query your devices based on this tags in device Twain I will not do that what I'm going to do actually is connect an IOT button another way to deal with the IOT hub is to work with the s code and there's two extensions how many of you are using vs code okay I hope the other ones will actually start adopting it today so this code actually has a great feature it is cross-platform and in the IOT world people working on devices well they very often are on a Linux machine or a Mac and so we have to have a tool that allows them to work with their devices on the platform they're using on their laptop on their machine that is running whatever it's running so this code is a good way for us to develop these tooling in a cross-platform way we're not forgetting Visual Studio we're actually also working this way just you your team actually to have all that support up there but today we are a bit more advanced with vyas code one of these extension is called azure IOT toolkit which totally aligns with the title of the session right the toolbox for the IOT developer that one actually will allow you to everything that is IOT hub related creating your devices lists devices get the device Twain all of that and you will see how in a second and there's another extension that is called the azure IOT workbench which depends on the IOT toolkit there one might or might not be available today the adaptive China team released it on github so you can actually download the vs IX file and install manually on your vs code it should be on the catalogue on the marketplace for extensions real soon and this one actually is is a work in progress experiment for delivering an end-to-end experience for developing on devices all the way from creating code for the device debugging the code on the device from PS code and then creating an IOT hub which is a composition of several path services like Azure function and others without a hub in the middle and deploying from PS code these solutions let me show you how that works so what I'm going to start with is invoking some of the command palettes commands and I'm gonna call IRT workbench new and I'm gonna create a new project and this new project I'm gonna put it here in a new folder and I'm gonna call it session demo select the folder and I want to select one of the devices today we support two devices there is the MX chip dev kit and since yesterday the button right so the button actually something you can work with with for bench and you'll see how in a second so I'm gonna pick the text mode button I want a solution that's gonna have ITA plus function today we only have these two templates IOT hub only or IOT R plus function will add more along the way and this workbench tool actually is open-source if you want to contribute more help us guys so I'm gonna have one with asha functions I'm gonna skip the choice of a storage account right now and I'm gonna dive into my new project and as you can see here I have a section which is about the device for the button there's no coding here because the code is already here it's just a configuration so I have a user data Jason that I can change and what I can do in there is eventually type something like button ID in there and as usual if someone sees some type one here they should tell me right button ID will be demo button and I can add something is like Twitter handle and in there I will just write that right so that is the way I'm configuring my device wash we I'm setting up data that my device will be sending each time it connects to the IOT hub and then I have my function itself and the function here as a trigger and this is code I'm gonna then deploy on to that that subscription so what I will do is show you from workbench how I'm gonna work on all these on the cloud side of things the first thing I'm gonna do is provision my services I need to provision an IT hub and then as your function so I'm selecting that I I can pick an existing IOT hub or create a new one right so if I want to create a new want to go down there I will use existing one to save some time as well and I'm gonna go to this device product team and I'm gonna try and pick the one that is called Olevia hub because it really exists the next thing is it's gonna ask to create a new device ID in that IOT hub and i will do that and i will create a new device ID and i will call that demo button ID for example and what i will show you real quick here is that I have my extension the IT toolkit connected to my IOT hub and it's actually displaying the device ID so that IOT hub and IC IAT demo button ID here which has just been created so that's pretty cool I can see what's going on on my hub without bringing up the portal very useful when you're developing the next thing is going to be a bad theater function so I'm gonna go on this subscription again and I'm gonna pick a you know build says in a change session demo LT something unique hopefully you don't want to speak that and I'm gonna work on the same resource group it should be one what I picked the wrong that's okay oh and they have no wrong subscription I'm gonna mess up with someone okay I want to set up a create a new one there you go and I'm gonna pick a storage account or actually create one with that name and it's gonna be in Asia because we can so that's actually gonna like spin up a new Azure function and it's gonna be ready for me to deploy from that tool as soon as it's finished right for the sake of time what I'm gonna do is switch to one is already deployed to not mess up too much with someone else's subscription because I think I'm actually working on some one hour subscription because I didn't pay attention I'm gonna open that other workspace that has been working a few minutes ago and that has exactly the same situation but the function has already been provisioned I here have button ID Twitter handle in my user data I've been playing around with my Twitter with my function the function right now is just invoking an HTTP trigger to trigger a Microsoft flow you would ask me why marks a flow because I can and this flow actually is very simple it's just gonna post a twitch so when I trigger this guy here with that URL it's going to post a twit it's expecting a unique ID and a button ID which oh sorry button ID and Twitter handle and it will tweet LOI ot world this is Twitter handle just pressed a button and Here I am so let me actually go back to vs code so you see here I'm doing this post a think it's using that URL and it's sending the body of the message so when IOT hub triggers the function it passes over the body of the message received by the device so function can actually just dive into that and and use it or pass it over to whoever is behind the function and that's what we're doing right here so if I wanted not to deploy that function I would just go to workbench and say cloud and I would say as you're deployed right so as you're deployed and it's gonna ask me do you really want to do that and then do you know what you're doing and it's gonna actually push that code up to that Azure function from here on and what I need to do is actually configure that device I will not do it because it works the way to configure that device is to put in an access point mode where you press five seconds the LED turns yellow blinking you stop pressing and then you can connect your browser or your laptop to that access point and you can you can set up the configuration through a web page we also have companion app for mobile devices that you can set up the Wi-Fi set up the IOT hub connection string and set up the little user JSON data thingy for your device the workbench tool allows you to do that as well I can show you on the booth later on if you want to see that so here I have a function as ready i TM is waiting for messages what I'm gonna do from here is I'm gonna monitor what's going on from this device so I'm gonna start monitoring device to plan messages and I'm already running over in time right guys okay just checking and so when I press this device it's gonna do something right boom so the advice actually starting finding the Wi-Fi it will connect to the IOT habit will send a message the message will propagate to a function that will twit something right so let's go while it's doing that so message received by ot hub the function has been triggered the idea the flow has been triggered and now if I go back here I should see a new twit and you twit from this device rush it from the flow right well in three seconds that's that's the one it's been triggering this function and then this Microsoft flow so pretty straightforward and something that you can reproduce at home with that IOT button very easily second real quick demo before I'm kicked out is the device twins I want to show you a very simple example of a device twin so that's not a device twin that's me and yes that one okay but this is the device I want to show you so this is a little MX chip device right so this is it one of a death kit pretty straightforward to connect we have some samples online this one is one of those samples this device is reporting a state which is displayed here on this little web app right this little web app shows the actual SSID it's configured to it doesn't show you the password you can hack my Wi-Fi but then is showing the very sensor status and whatever I can also interact with that web app to set a new device property and here I can say a turn that light on or off and you'll see a little lead here down there it's going to turn on as soon as the device is connected is synchronizes as the rights win the other thing I can do is actually play around with the color of that LED which is the other one here so when the device synchronizes between actually it might need to refresh the page here try that sorry do demos live guys super important let's try again and hopefully device itself is still connected actually green okay my button is green I put red and come on buddy oh no I'm lucky it's hi ot guys so I can just do that okay and you're gonna trust me it works I won't leave the stand until it works come and get me okay so what I want is for the guy to say I'm connected can we go blah blah yeah actually it's it's green that I want here on this guy here green hey red red red red okay good so last but not least device provisioning service so I had a set of slides but I'm gonna skip them so device provisioning service allows you to rapidly and efficiently provision tons of devices so I have one of these devices I can flash a unique ID on that pretty easily I can if I'm dirty and not secure I can hard code in my application that connection or I can flash it in some secure storage on that device right and so that would be actually the right way to do secure storage you flash some secure identity some unique identity that is used by the SDK to create a unique token that will allow it to authenticate with IOT hub right the problem with that you cannot you need to have the different you know identities for each of the devices that you're going to provision so if you have 10 easy if you have 200 1000 1 million it's not gonna be that easy so what we offer was device provisioning service is a way for a device to connect to a universal endpoint to provide a piece of ID which is already provided by the hotter manufacturer it could be a MAC address could be a secret seed that is actually flashed into a TPM or indice or into st safe in that case we're using st safe where we have some unique identity that's been flash with 64-bit something and that the manufacturer of the chip itself will provide so you and that information a piece of identity or eventually you have assert that has been created from this identity and you're going to put that into DPS in what we call it provision and what that provision will say is that for that specific piece of information that's going to come up from a device I'm gonna associate that to an IOT hub right and so that means that when the device comes live DPS will ping that IRT you have will say hey do you have an ID for that device create one if not and give me the specific information that it will need to connect to you then DPS passes that over all encrypted to the device device flashes that in some safe storage and then uses that to connect directly to IOT hub so let's look real quick how that looks like into my portal and I have set up I still see me I don't want to freak you up too much so DPS here I have an instance of DPS what I've done is I have attached NIT hub which is my only real hub here so there's one of them I could have several of these higher up set up and I could then do geo sharding I can actually indicate which IT hub each of devices needs to connect to and then I have my enrollments and I have one enrollment which is an individual one I uploaded a x.509 certain creative with a unique identity that is now flashed on this device here so this device here has no idea which iti bit needs to connect to it right and actually as a matter of fact if I look in here you can see a set of these devices and you'll see a new one appearing in a second so what I'm going to do is I'm going to connect this device this guy is starting its connection and if you see it's all blurry but it's connecting to Wi-Fi and then it's going to connect to the GPS endpoint and then it's going to request for a an identity that's going to be created into IRT hub and so if I come back here I will see that boom there's a new identity that's been created MX chip device 1 and the device will start sending data and we can see it's green here that means it's actually actively sending data right now so I was able to seamlessly provision that device by just connecting the red cable you need a red cable though just saying okay just checking you're still awake guys so what we gonna do now is we're gonna switch what I want - oh no actually no I have something funny you guys did press the button right not see you did whoa okay cool so what are you seeing here is a heat map of when whoo quick so here we have I don't know how many but not everyone is actually super active here we won't have more than that because we gave more than these number of devices each time someone clicks we have a new red dot that appears so continue and and we'll see more in a day of these and will come will come to them so this is actually a time series insight display and I'm gonna end it over to my dear friend Andrew who's going to be presenting about TSI so I'm gonna switch this HDMI cable unless I think we're gonna do the switch before just like on this side you have the slight stuff okay you wanna slides I do want the slides okay sorry for that guys hi everyone well Olivier's setting those up I'm Andrew Shannon I'm a program manager in azure IOT engineering and I'm a p.m. on a short time series insights so I'm gonna spend the next 10 to 15 minutes talking to you guys about some of what we're working on I'm gonna introduce you really quick to the product I'm gonna talk about some announcements that we've got and I'm actually gonna jump into some code associated with some really cool developer tools that I think you guys are gonna like so the high level as your time series insights as a fully managed service for time series data when you think of what we do it at a high level there's really three core jobs we store time series data we visualize time series data and we give you the ability to analyze that time series data we play super nicely with Azure IOT hub we're seamlessly connected and have created our own event processor so you don't have to build one of those if you want to get started with messages coming in from an IOT hub and we also have a built in aggregation query head on top of time series inside so it's really easy to do things that you would naturally want to do across lots of IOT devices like aggregate them so you know a couple of things that I want to call out you know some of you may be familiar with us we you know we're a lot more than visualization and you know in in general most of what our customers have done are really in a platform level we have ABB in their ability platform who's actually used time series insights at its core to do all time series data storage the management of that of that data and then they populate KPIs using our query head and have their own visualization we also have companies like Steelcase who've built a smart spaces application that uses time series insights to do all this storage and the querying if that's of that time series data to really take a their time series data and make it incredibly powerful and super performant for their users now a couple of things about our storage we're in in-memory and SSD store today we're a columnar store underneath that's optimized for time series data and until recently we've been able to store data for up to 400 days and about three terabytes of data which kind of makes this a warm store we're interactive it's not it's not automatic but a user can interact with that data right when it comes in they can slice they can dice the data is always hot they don't have to wait for it what's really cool though is that we've just made a few announcements that we went into preview with some new features so the first one is that we've added a tag centric user experience so where is today if you want to start with the device or if you want to start with a time series you would filter aggregate to get down to one particular thing what we've done is we've actually created the ability for a user someone like a process engineer an asset operator a plant manager to be able to actually start with their time series so if you have users you're you being a developer in the backend for a company that wants to provide a tag centric user experience to your end users this is a really easy way to create an intuitive experience for them to be able to quickly get to what they're looking for now underlying this you'll notice we have a hierarchy Alexson get into code here in a second but we've got hierarchy on the left and underline that hierarchy is a time series model so if you know anything about time series insights today we allow you to store metadata which we call reference data that's a dumb flat table today what we are adding in this preview is we're adding a secondary table that's dynamic that provides semantic lift to this it provides the ability to pass hierarchy and so you can actually have a more context around the data that you've got which gives it more meaning now the last thing that we've done and the reason why I brought up you know 400 days or 3 terabytes is that we've totally unblocked those limitations with this preview we've also added long term storage and that long term storage isn't just archival so now we're 1/2 and cool paths it's also because you're passing us effectively a type of a tag idea device a via space adiy whatever maybe that's kind of the key value that determines that device will actually store this data as parkia files and will give you the ability to query over years worth of data in an ultra performant way to still be able to take advantage of that data that's stored in a really inexpensive cool blob storage so the product really of just evolved and I want to show you some of this really quick so I think Olivia's gonna flip me over yeah this is brains let's try that let's try it one more time here to see it works how long it's I think we're going this is this is we're rock and I'm gonna do as well man right here okay so this is times this is time series insights you know we've got some really cool functionality we've got a beautiful heat map we've got charts we've got perspective view this is this is time series insights thing you would know it today we have a where clause this allows you to pass a predicate that filters we've got temporal operations date histograms operators like that but what we've just added is again this hierarchical view that allows me to do both basic search functionality as well as advanced search functionality so I can go and I can start typing in temp something that I would expect to be able to do really quick and I can start plotting these values in your real time and I'm on a Wi-Fi network but let's just go through this we'll plot a few of these values and I just want to show you this functionality Varghese this is actually live working which were really really excited about so again this is tags this is using a totally different API that we've recently added and it gives me the ability to do some really really cool stuff of this data so that's time series insights but we recognize that you may not want to use our user experience you probably want to make this into your own app and maybe you've got your own company's application we've got a bunch of options for you and one thing I'll caught is that our IOT solution accelerators remote monitoring predictive maintenance they including Azure IMT central which is our SAS application has all adopted what I'm about to show you and if you want to start from scratch you don't have an app you're trying to build an app it's the best place to start is using one of those solution accelerators it allows you to start really small grow it into a big app and you're using the JavaScript control library that I'm going to introduce you to right now so what we've done and what we're looking at is a web app that allows you to very very simply do two core things one is to make it incredibly easy to query the data that's living in time series insights so as opposed to writing a JSON based API which is what we use it's simple to use but you may not want to do that you may want to write something that's a little bit more like a predicate and expression that you would use in the time series insights Explorer we've actually created a wrapper around our API to make it very easy I'm gonna show you the code on this in a second the other thing we've done though is whether or not you're using type data stored in time series insights if you have time series data that you want to join with data stored in time series insights we've also provided another method that allows you to very easily visualize in charts like line charts bar charts pie charts heat maps grids etc the ability to render that time series in this if you pass this JSON so let's actually only give you like just a quick flavor of of what we've got here and I'm gonna do a quick time check okay so we've got a bunch of different visualizations as you can see we've got the ability to do things like right click so we've provided a context menu we've got controls that allow you to lay over time series this is a discreet Vence and different stages but when you look underneath this code what's what's actually happening is is a few really cool things one is we we give you that ability to to simplify that code so let me show you one quick example if I just flip back over you'll notice these three graphs these three graphs after we've done things like authentication we've called in the CSS files kind of a stylistic elements of this page what you'll notice is this amount of code is all it takes to render those three graphs and what is incredibly cool is that all we're doing is these three little methods to do a pie chart of our chart in a line chart and so what this what this the power this gives us is to be able to go and start with almost any JSON that is in the form of time series and to be able to start rendering it incredibly easy so let me jump back into that code for a second you know the way to just to orient you with this code what we've got is we're passing in an array we pass in a two and a from like what's the time range that we want to look at we're gonna use that to and from across all three of those charts we have what's called aggregate expressions now a great expressions are effectively the call to the time series insights API our back-end and you'll notice that this TS i client dot UX which is a part of the library is giving us that ability to very very easily jump into this to be able to call that data we have a few properties some are optional some are required but what we've got here is is a very simple way to be able to pull that data now the other thing that we do is we're seamlessly integrated with Azure Active Directory which matters especially in a managed environment like most of you work in and so what we've got is above in the code I won't go through it but we're using a dolt to basically do all the authentication with aad what we're doing with this is we have a one line of code that's allowing us to grab a token just to make sure the user is authenticated and then what we do is we pass these to aggregate expressions we're passing them as a batch so we can batch as many aggregate expressions as we want to and once we've patched that all we're doing is we're passing the token da-ad authentication we're passing the environment like what's the time series insights environment the URL in which this data lives and and then we're passing the aggregate expressions or that batch and what comes back is from Martin from TSI at least isn't compressed JSON and a compressed JSON doesn't render incredibly well in in a line chart or a bar chart and so what we do is we have this method which transforms that result from something that's not incredibly amenable to a line chart it makes it very very amenable it's what you'll see is the the two different main components of this library are the time T si client that server which is how we interact with the with time series insights and then the TSI client UX which interacts Jeff which allows you to render this code very very simply and so you know a couple of cool things here one is it's literally just these lines of code that do a bar chart a pie chart or a line chart you know what's really cool and I actually just want to show you this briefly and I've cheated to make this little bit easier but I'm actually just gonna switch in real time some of this data so let me just inspect the elements let me jump into the console I'm going to show you this graph is the line chart you'll notice this this graph to well here is what is really cool all I'm doing and just just to show you this code is what I'm doing is I'm going from the line chart to a pie chart so this is going to change in a puncher that's that's all the code it takes and I've got a pie chart it's the same data it's literally just changing those to func to variables within the code itself and I'm able to do this so for you all what I'm hopefully you see is that hey if you're using time series insights it's really easy to embed it into your own application it's super easy to keep it in a managed environment because you're using how's your active directory and it takes a significant amount of the burden off of you all to have to code to build beautiful visualizations using your time series data now I want to show you just one or two other small things before I take off what I want to look at is is this code right here so or this chart right here what we've got is we've got a legend on the Left we've got two different buckets incidents and component States you can imagine this is maintenance on a device this could be on and off incidents or discrete events something contextualize it to say hey such-and-such was working on the device in this particular moment where we had an incident where went offline I just want to reflect that and what we're able to do is we could all of this is ty is data for stored in TSI but I could just as easily pulling data from say the weather service here to make this really really powerful and so just to jump back into the code for this particular component I just want to show you how easy this is all we've done is we have passed in some JSON we've hard-coded this but you could use a console app to do this automatically what we've done is we're passing in a key property which is a which is a JSON JavaScript iso timestamp and then an array as the as the value which is color and description you can do that with any state and it's automatically going to render on that church's though you'd expect similarly you can add brushstrokes context menus and as we speak we're just publishing documentation on this now we're going to keep evolving this code and we want you to be able to pick this up and quickly and easily use this but we also want you to be able to contribute so this is open source it's an NPM we've got it on NPM we've got it on git we'd love it if you contribute to this but we'll keep evolving this getting the documentation up and running so it's easy for you guys to use now this was a smorgasbord that I showed you but what I wanted to show you is an example of using this application to to build something that would be functional for your organization and then I'm going to hand it over to Chris Pendleton who is is the PM lead for Azure Maps let me just see if I can't get this guy work and I think I've got well I'll show this and even though the bottom is still doing something a little weird but what we've got here is is a Azure Maps on the top left we've got a bar chart and the bottom left and what I have the ability to do is import in a process graphic and and use time series insights to start to see what the current status these up these values are updating every 30 seconds I know exactly what's going on with my device and if I want to I can always flip into the time series insights Explorer to do a deep dive what's really cool though is this app only took about an hour to build of that hour the azure maps component took about ten minutes so this is very very simple to use to build your own custom application and you can make it even richer by embedding Azure maps into it so with that I'm gonna hand the torch over to Chris and Chris will take you through our Maps [Applause] sees me yeah ten minutes newbie yeah should take about 30 seconds actually for those of you have done this before so uh thank you for the intro Andrew so welcome to Azure Maps today actually yesterday was the big announcement where we announced general availability of what was as your location-based services is now Azure Maps and in partnership with TomTom we have a fully running stack of mapping capabilities built natively into the azure cloud fully available to developers so now we have a developer platform that is backed by one of the largest mapping companies in the world in TomTom and the services that we offer are pretty robust as rb1 and so right out of the gate we've got almost a complete global coverage of map data available in full vector form so we're rendering information from the global database from TomTom in the azure cloud down to clients through vectors and I'll give you some demos of that we're ship we're shipping a javascript map control to make it very easy that's what Andrew was showing I'll walk through the simplicity of the implementation of that we have a very robust routing service so routing is different in the Maps world than in the IOT world so routing is basically directions with the directions come from pretty complex algorithms behind them taking the data and and providing directions both a to be a to CA to n end-to-end and lots of lots of different algorithms that were shipping as a part of that I'll talk about that and a little bit search and geocoding so search we've got a huge corpus of place data place information as well as business listings and so the business listing information is probably the hardest to keep up businesses open closed all the time hours of operation vary throughout throughout time as well and so we're making an API available globally for that data corpus geocoding is converting address information to latitude longitude coordinates we're making that available as well as well as the reverse so if you have a coordinate we can tell you what the address is or go up hierarchy and figure out street name and postal code city name things like that we also have best-of-breed traffic this is where things get pretty interesting and there's a bit of a crossover with IOT as it turns out maps have been made through drawing over aerial photos for so long but with the adoption widespread adoption of sensors including the one that you're driving around in everyday Maps tend to be more flexible in Auto generation or regeneration and so as we start to get a penetration of massive amounts of sensors mapmaking actually gets pretty interesting because we can start to automate how maps are created so for example as we start to detect GPS sensors traversing down a road at 60 miles per hour and we don't have that road in our database we can infer that there might be a road there we need enough evidence to do that but if you can imagine the penetration of sensors that are now filling the world and most of them have a GPS we can actually automate map creation and so what we're trying to do now is use IOT sensors IOT capabilities for communication to effectively auto generate a map and do that at scale and do that globally traffic was sort of the first example of that traffic generation was actually done by movement and over time you look at the history versus what what it's actually look like right now current traffic and that's how you determine the difference in speed and you can annotate traffic as red yellow and green finally a time zone API I'll talk about that a little more detail but effectively if you've got a location will tell you what time zone it's in what the offset is to GMT and what time it is there so general availability fully integrated into Azure the simplicity of adding an azure Maps account to your subscription is literally go through the azure portal click and you're in if you have an azure subscription if you have you can do pay-as-you-go super easy to get a key it's all key-based authentication pass any key to the rest services and off you go so what's new for GA for those of you who were familiar with Azure lbs prior to today a little treat for you so we've got a new API that returns static images so that's pretty useful a geometric search for places so you can actually pass in geometry to specify a region for searching I'll demo something like that a nearby search which is a radius search for business listings and things in an area so given a point in our radius you'll be able to extract business listings that gas-station pizza places coffee shops bars and then searching along a route so given a route we can create a buffer around that route which is sort of old-school but we actually initiated the driving direct the actual driving calculation so if you see a gas station off to the right of the highway and you think that's the closest one guess what that's a 30 mile lake in front of you and you have to go all the way around so as the crow flies doesn't always work and so you can do either a buffer search as the crow flies or actually use the actual route geometry in your calculation we localized the time zones in 30 different languages that was the immediate first piece of feedback was that our time zone information was in localize so we implemented that and then we added accessibility support for our map control so the map control actually will be read by a narrator it will tell you that there's a map app on map container it'll take the center point of the map and tell you what the center is that you're looking at through a string reference so let's take a look maybe again yes all right so this is what the canvas looks like this is just our map control loaded up into a web browser full screen fully manipulative so we we colored it with Azure specific colors usability has played a part accessibility has played a part there's a lot of thinking that actually went into the design of this map and again it's vector drawn on the client we've got some listeners on the client so if you click you can add pins you can rotate the canvas we could do two and a half D all of this is fully available and you can annotate it with layers as well so and I'll demonstrate that in a second here so just to give you a visualization of what Azure map's looks like it's sort of a reinvention of maps within Microsoft and and how we want maps to look inside of the azure cloud it's an acutely focused platform on developers and enterprise customers and so we are taking azor maps to our enterprise customers we're focused on IOT scenarios but as it turns out IOT is sensors which is in vehicles it's also in satellites in space and so I get to play with everything and everything that's as it turns out it happens on this planet needs some kind of planetary reference and so we've got a new Maps platform inside a Microsoft so let me take you back for a second and hopefully you can get back to the code walkthrough here so you know Andrew mentioned ten minutes but really this is all the code you need I stripped it out of all of the stuff that you may not need but just for a HelloWorld application I mean we're talking about five lines of additional code to a basic web page right at the top you're linking to our our style files as well as the control itself you can download those modify them but at your own peril add a div passing your subscription key instantiate the map pass in parameters for the map super super simple to do this in JavaScript and all available in general availability today so let's go back to demos and look at some of the other fun and crazy things that we can do here so I've got a demo here for polygons so I mentioned there's listeners on the map if I wanted to just draw a polygon on the map so first of all I click the map and added a pushpin what that did was in that click event I listened for it I grabbed the pin I actually instantiate adapt in object I instantiated a layer object and I passed that layer on top of the map so now I've got a layer above the map that's got this black pin if you will and as I continue to click around I can do so or whatever shape I want here and then draw a polygon and so now what I've done is I've added pushpins a Nevada two polygons and I've added them on the same layer over the map and so what I could do with this is actually extract the coordinates and make a spatial query to a spatial database so if there are things here that I care about inside this polygon maybe I have a tea sensors I can actually then take that information off of the map and send it to any kind of spatial database that accepts that Long's and when I talk about layering we've got quite a few layers here this is just some demo applications that we've built I used to I'll turn on traffic flow here but I used to have to go to LA for guaranteed traffic but traffic and Seattle's done pretty rough over the last few years so again this this traffic information is near it's available in 65 countries at this fidelity out of the gate I can turn on incidents so I can see where there is potential accidents so I've got some construction here's the real reason we got traffic here a lot of construction going on but what and then I could turn on poi layers and things like that and again I'm looking at listeners so because of all the traffic I really just want some bars around let's look at another thing here so interactive search so this is querying the Search API for business listings for points of interest for addresses if you don't know what the user is going to look for we have a fuzzy search that's basically send me your garbage I'll figure out what it is so I can just search for something like gas stations here it does ship with an auto suggest feature as well and so you can see here we've got detailed business information for gas stations in LA for example here alright and then one other demo I wanted to show you before I move back to the deck is our is our routing so the routing is actually super robust I mentioned that but it also supports commercial vehicles and so the idea is that a commercial truck company or any kind of commercial company that has specific types of payloads can use this routing service to determine the best route for them so for example and these are just a few of the parameters we're sort on time so let's say I want to carry some explosions some explosives from Seattle to maybe Salt Lake City I can route and what you'll see here is the blue line being a car route so that's the most optimal route if you're driving with your and your family but organ ain't having it if you're carrying explosive through their state so you're going around Oregon but the idea is that we've got the route geometry annotated with commercial vehicle information you know there could be great it could be Road speeds it could be you know the types of payload I mentioned so we've got quite a few hazardous materials annotated on to the road geometries as well and as I mentioned we're getting into a world where the map creation is automated at this point for those of you have ever been in Maps it used to be quarterly drop of map data the whole globe you get it one quarter and then in six months you get it out and you'd miss two more quarters in our relationship with TomTom they're publishing every week so we are now down to weekly updates of the base map data in Azure for Azure Maps and we're moving even faster as you can imagine we're starting to get more and more sensor input and the maps are getting higher fidelity faster so that's some good eye candy for you guys let me switch back so in relationship with time series and you know these things happen like Sandra and I have met twice in our whole lives and as we're sitting here we're like we should work together and so conveniently we with this time zone service I wanted to illustrate that under the azure one API moniker we structure our API is very similar and so Andrew and I are sitting here saying we should build this together we should I've got time zone data you've got time data why aren't we working together so that can the connection of space and time often happens at serendipitous opportunities such as like today so if you see some kind of intersection with the time series team and a deeper integration with maps don't be you you you were here when it happened and so the the time zone API it's it's pretty cool it was actually a funny story that it happened over Christmas break we were I was like four months on the job and I said you know why is there no time zone API at Microsoft well we went and created one and we took Ayane data we took Windows data so Windows had its own time zone data iona Ayanna's open source and then we took polygons from our legal team and basically lashed them all together and came up with a pretty robust API that's getting a ton about adoption and so talking about the structure of this you'll see at least at Microsoft comm that's effectively our host name and then timezone being the actual service name so I point this out because the structure of our REST API s is the same you'll find the service or you'll find the base name you'll find the service and note and you'll find method the JSON is the output type the API is the version is the version number and then if I query and query is the key across all services and so whether you're on search service and you're searching for something you put in the query that's where you put in your query for routing that's where you put in your query for routing it's a unified one as your one API that you'll find across all of our Maps in fact all across all of Asia so as you're developing your applications it's very easy to start working with the REST API s4 as your Maps and then the REST API is for other services and integrating the two pretty fluidly so I do have a shameless plug so back story olivier gave us each twenty minutes and then he said hey can I have some time back and I also have to close so I have a session tomorrow to dive deeper into maps if you guys are available for that would love to see you there if you're more interested in getting and getting deeper with maps so cool I think we have so we also have this slide here with all the sessions for IOT you'll be able to download that you can find that on the app as well one more thing complete the evaluations the patent doesn't work for evaluations all right you got that right okay and a couple things for you guys IOT show shameless plug as well all right this is the one that we have on Shannon line that we talked about what we're doing at Microsoft IOT stuff and now we have a new website called the IOT school that is basically built on them on the same platform that the AI school the idea is to have your own learning and to end learning experience at your own pace for everything IOT we know that finding content across videos documentation reference whatever and tutorials is hard so we're making it easy through the IOT school beyond the fact that we will have a cool sticker at some point that's website actually is pretty interesting for you to discover IOT but also now to learn more because we're going to add new new learning passes they're gonna be more in-depth and we're gonna connect that to our certification program as well so for now it's not connected so you cannot be certified by going through these trainings but in a near future that's going to be the case you'll be able to actually hook up into our certification program and programs for IOT through the edge school so we literally are running still backwards it's so good right we still have three minutes for some questions and and literally I have two buttons for the two first questions good questions am I gonna give a button for that question that's it's called MX chip and that's one of our deaf kits if you go to our catalog to go to catalog that I as you're RT suite the comm you'll find information about deaf kids and this is one of the deaf kids up there yep yeah sorry xamarin good question likely we haven't committed to zaman but we have committed to other mobile operating system platforms so but zamarons a question mark for us we get we're so we are actively working with that team to figure that out but what's the questions here right now it's JavaScript but we'll be going after Android and iOS as well I think that's coming so we would have to have a colleague of mine Ranga might be on the boost today I can get that answer in the booth for you today later in the afternoon I don't have the answer ona yep no not right now it is not I can see that happening remember they work in space and time how would you so the if I understand correctly if the device is lost or compromised alright how you know it's not a good device right so you have several ways to do that whether you know that this device has been compromised in which case you know which device I need to deactivate an IOT hub in which case when you deactivate that you can delete the device identity said will never connect again or you can disable the identity to block the device from connecting to your IOT hub so that way the device is unusable now if you need to identify that the device is not in the right place or location that's your own logic that it can actually implement behind the IOT I'm looking at the data like for example you can actually use as your maps to detect that your device is not in the location it's supposed to be in and in which case the device sends its location data in the backend you retrieve the data you have the location say well this one is actually not the right location let me deactivate that device ID until I get the physical device back does answer question the button itself here actually the identification is done through a set of settings so you put the device in access point mode and then you have a webpage or a companion app where you input a connection string that's coming from IOT hub that has that identity so that's that's manual for that one it's a simple device just for proof of concepts and and demos and basically you have a manual setup of that identity on the device so we're not tracking you you're good I may be tracking you but well I recommend as your master bias and he has no shame so there there is no current plan to replace Bing Maps that will continue on we have a thriving developer ecosystem on Bing Maps the approach to Azure maps vs. Bing Maps is really we want to target our as your customers we're having a all of our Azure customers were coming to Azure that have requirements from around the company including those that use Bing Maps we want them to have location services available to them when they arrive and so my personal opinion my professional opinion is I would get on board with Azure Maps if you're starting a new project there's a fairly significant focus of the company these days and IOT is an acute focus for Satya so I think you're in twin quick sous-sous yes or again today today the data is up to three terabytes what we've just gone into preview with is realistically whatever Azure storage can hold so it's on the order of 500 terabytes we can get an we will get into petabytes we'll add additional cold storage layers underneath as well throughput yoo-min no it's an overall capacity I mean we were it's a it's a very performant databse structure that enables us to do that Aquarion that we can do hey hi yes yeah it's one of the projects if you go to DMX chips yeah with time series insights yes we use yes so if you go to our URL which is inside stat donnager time series com um forward slash demo you're gonna land on a dataset that you can query from today yeah yeah absolutely if you go so again we'll have documentation post on this like it was posted at 10:30 you couldn't go that data is tied to our that demo data set so you should be able to go use if you wanted to build your own web app using that control library that we did you can use the data that's living within time series in about that is you can actually look across them both see what's in the TSI Explorer and and look with with the JavaScript control library to see how to use the API yeah so we have a like on a microsecond using our API we have a microsecond 10 concurrent query limit today we're working to as we go into public preview with the new feature set to blow that away and to just make that more scalable we in theory people can hit that in practice we haven't seen anyone hit that 