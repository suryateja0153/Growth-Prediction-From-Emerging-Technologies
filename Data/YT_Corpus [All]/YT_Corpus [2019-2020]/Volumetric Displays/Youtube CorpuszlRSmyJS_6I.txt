 okay so welcome to this EMBL-EBI training webinar this going to look at the Mol* web tool for visualizing 3D molecular structures. My name is James Tolchard, and I'm a data curator here at PDB Europe. Now in the next few slides I'll outline the topics the talk will cover but feel free to ask questions any time via the chat box in your viewers and we'll save answering these to the end and but I'm also going to be joined by Mandar Deshpandè a developer here at PDBe and between us hopefully we'll be able to answer your questions. Of course you can always ask questions or contact us specifically at PDBe via email or our social media channels as well. Right so I'm talking to you today from the PDB in Europe based just outside of Cambridge in the UK. We are one of the four sites that comprise the core PDB archive along with RCSB and the BMRB in America and PDBj in Japan and as such we help to collect curate store and disseminate atomic structure information to users all over the world. We also aim to provide outreach activities to the public and training materials to the scientific community and this webinar is one such example. Now here is the outline for the talk. I'll firstly introduce Mol* and its development before showing you the basic use and visual look and feel of Mol* and I'll then move on to show you how you can look at volume data whether it be by x-ray crystallography or EM and then we'll finish up by looking at ligands and visualizing annotation data before briefly discussing a few of the developer related aspects that have been kept in mind during the development of Mol* so to introduce Mol* I'll assume all of you are at least familiar with the principle of molecular visualization and are probably aware of a few existing tools already Perhaps the most well known software programs are the desktop based ones such as PyMol or Coot, those ones that are locally installed. Now these often have powerful features such as elements of refinement or docking but lack full web integration. On the other hand there are a number of web-based tools such asJSMol or NGL and whilst these can be embedded online they often have very specific functionality and without the power of local hardware they can struggle to display larger structures and volume data. Therefore it was with the idea of resolving these two conflicts that Mol* was developed - to provide a molecular viewer that was easy to use and suitable for embedding online content but which could also be used to explore aspects which are typically more computationally demanding. This last challenge of tackled from a few directions and now, as I'll show later, we also host specific data servers which can be used to serve both coordinate and volume data in a very precise manner so as to be efficient with data transfer, data parsing and data processing as possible. I'm pleased to say that the Mol* development has been and continues to be a collaborative effort. From the beginning Mol* has been co-developed between David Senhal of PDBe and CEITEC and Alex Rose at the RCSB US Protein Databank. And then with, the scope for site-specific integration our own Mandar Deshpandé has joined the effort with a view to incorporating Mol* into PDBe's online content In terms of features, Mol* was designed to provide ready access to the most common visualization aspects like molecular representation and coloring as well as overlays of biological assemblies or validation scores and for comparing anatomic coordinates to their corresponding volume data. There is of course the ability the pull the structures directly from the PDB with an entry's accession code and you can load local structures for visualization as well. There's also many many advanced options to dig through such as occlusion and other lighting effects and thanks to the magic of Web-GL the images you create can be exported in high-quality in next to no time without costly operations such as ray-tracing. Lastly it's worth quickly highlighting that I've actually been able to embed Mol* directly into today's presentation using an iframe component on the slides.com presentation website. Technically I couldn't find a way to do so in Microsoft PowerPoint or Google slides however I thought it worth mentioning quickly as in the past I have spent a lot of time looking at ways of incorporating 3D structural data into my talks. So let's look at the basic usage of Mol* and show you how to load a structure directly from a PDBe entry page. But, just before, let's briefly run through the controls. So depending on whether you're using a mouse or a touchscreen device the controls are as follows: To select and rotate molecules simply left-click and drag or one finger hold and drag. To move or translate a selection just right click and drag or two finger hold and drag. To zoom in on a selection either use the scroll wheel or two finger pinch. Two finger scrolling to zoom also works on my laptop trackpad. And for slabbing either use the scroll wheel with the shift key held down or three finger holding and dragging on a touch device. Okay so when landing on a typical entry page you will immediately have a "3D visualization" link on the right hand side. Similar links are available directly from the search pages as well. Now you can see after clicking this the Mol* viewer will open and the central section will show you your molecule of interest We also have the basic settings on the right hand side and the control bar at the top. To quickly go through the control bar we have from left to right: a help icon that can show the mouse and touch controls; a settings cog that expands into advanced options where we can change many settings like those to do with image rendering; an image snapshot tool take a quick snapshots of the viewer and download them to your downloads folder; the control icon which toggles basic settings on and off; A fullscreen icon which is in effect in this viewer now and lastly a reset camera button which is self-explanatory Now the controls I previously mentioned work here and hopefully you can see the speed at which I can easily move around the structure whether it be by rotating, translating moving around the structure, zooming in and then when clicking on a specific area of the protein I can also hold shift and scroll and change the slabbing as well now in terms of the most readily accessible basic visualization settings you can find these on the right-hand side where each molecule type will have specific options. Under polymer properties you can easily edit the visualization style. So for example from cartoon we can change this to space filling atoms and click update this is a change immediately. You can also select from many predefined color themes, for example here we can change to residue name and then you can further alter the color scheme from the next drop-down box should you wish. Lastly should you actually hover the mouse over certain areas of the structure, or tap with the touchscreen device you will get selection information about this part of protein in the tooltip shown on the bottom of the screen. Should you wish you can also change the granularity of the selection in the Advanced Options where we can alter the selection mode to for example distinct chains. Now if I hide that advanced option you should be able to see that I can now select distinct chains entirely and that this information is also presented in the tooltip below. Of course feel free to experiment with Mol* on the PDBe website throughout the webinar and but now in this section we will cover how to look at and interpret volume data with Mol*. Firstly for x-ray crystallography With Mol* open we can find map options in the basic settings pane on the right hand side of the viewer and this would appear for all x-ray entries. But even without changing the options just left clicking on the structure will actually bring up the 2FO-FC and Fo-Fc omission maps on top of the structure. If you're not familiar with these, simply put, the 2Fo-Fc map should highlight any extra density into which the model has been built and the emission map should highlight any extra density that either wasn't modelled into (shown here in green) or extra bits of model which are not well described by the data (shown in red) Now here is another example of that in practice. So again if we navigate from an entry page using the 3D visualization link, once loaded, we can see that by clicking on part of the protein you'll automatically get a slabbed zoom to that residue and the relevant section of the density map is fetched and overlaid on the structure. This is an example of Mol* using the PDB volume server and you should be able to make out especially if i zoom out now that we are in fact only looking at a small section of the map this is actually quite a nice entry and if I can find them yeah hopefully you should be able to clearly make out the density that nicely describes the iron-coordinated hemes. Now there seems to be a standard level of noise and the red and green omit maps here. However, should you want to investigate these further there's also a facility on the right-hand side to drop the visual threshold for any of the maps. Also by clicking on the map names you can also change the color and representation as well as the opacity of the maps. And lastly if I scroll down hopefully this will load quickly, you can also change which sections of the map are visible at any one time so for example now our view is was around and it's defined us around interaction which is then where I clicked on the model should I change it to a whole structure and click update we're now sorting the entire map for the whole asymmetric unit and hopefully if I zoom out fully you should be able to see that that's indeed what we're visualizing in our totally online viewer. Now okay moving on. In this section I'll show how we can start to analyze EM map data So historically speaking visualizing EM data has required quite large data transfers. Other tools for example have previously asked you to download the map files your local machine. However with Mol*, any EM entry with an associated map can be quickly visualized totally online. This firstly takes advantage of the volume server, as I previously mentioned for the electron density maps. However we also improve the speed of map visualization for the EM data by actively down-sampling the maps when using a low zoom level. This way we can be efficient with the data that we need to serve and process and the user can hopefully appreciate the map data at any level without any significant lag Now in this example we will open Mol* directly from a PDBe search result - So here you can see that on our website I've free text searched for this entry code 6 r7m the structure of the tobacco mosaic virus capsid and now directly from the search result I can launch Mol* again with this 3D visualization link. Now you can instantly see how how quickly a version of the whole map has been loaded and visualized and this is default behaviour for any EM entry. On the right hand side, you can see the map settings. For example we can toggle hiding and showing noting many other properties and by clicking on the EM tab you can also then change the color representation the map the same way we could for the electron density data. Now in fact in, this part of demonstration I've actually changed polymer color to help clarify things so the polymer properties and change the theme to uniform to  make things a bit clearer. Now where are we, okay so as with X-ray data you can change the threshold of the map there should be one thing and if we look under the view properties here we can even change the detail level the map where in higher tiers are more  contain more information. At this level you can clearly make out especially if I turn the structure this way and zoom in again you can clearly make out the additional volume which the depositor did not continue to build a structure for but then if we change the view type to "Around interaction" if we click on an individual or specific part of the protein we can clean up the view to take a closer look at how the model was precisely fitting the map and for example here you can start to see some helical density and perhaps you can see since some side chains that are well described by the map. okay Now, here I will show you how Mol* can be used to show annotations including those prepared by the PDB and those from other bioinformatics services. What I mean by annotations here are for example highlighting the differences between the structure and the asymmetric unit versus any biological quaternary structure or symmetry partners. I'd like to think that perhaps most of you are familiar with the PDB's validation reports that we produce both during deposition and alongside our entries online at least have a simple color code from green to red that describes the accumulation of geometric issues at the residue specific level and using this information you can combine it with a coloring scheme for our across our protein so we can start to visually interrogate our validation metrics for any entry from the PDB archive. In terms of other tools it can also pull in annotations from services such as PFAM the highlight extra features like protein domains. Now very quickly I'll show you these features now for a structure of a Hsp90 with an inhibitor. At the top of the control panel here under source ...  we can see that the biological assembly is selected by default and that in this structure it is a dimer with two distinct protein chains. However, if I choose to show the deposited file that's a source, change the deposited file, and click apply you can see the dimer was actually built with a symmetry operation the deposited coordinates in the asymmetric unit only describe a monomer now I'll show you that when waters are present as a molecular type these also have their own in visualization options and again for clarity here I'll just turn them off now if I pop up again to the annotations pane I can now choose to show the validation report data and the coloring directly on the protein structure now here we can see perhaps unsurprisingly there our most dynamic regions flexible loops all those which possess the worst geometric scores and indeed if we then hover over you specific residues we're able to see a bit more information about this in the tool tip at the bottom and here we can see that residue tyrosine 38 has issues in the validation report with respect to clashes bad bond lengths and bond angles. Now in terms of other annotations if I now turn validation report coloring off and activate coloring I can now start the show annotation from external services so here Pfam is shown an example of this histidine kinase domain or DNA gyrase B also for this structure InterPro for example would highlight the different subdivisions of functional families in hsp90 so for example we should get a distinct coloring and depending upon the InterPro classification and again we can see this  specifically written out in a tooltip at the bottom and for CATH we should hopefully be able to see structural annotations describing the whole heat shock proteins topology. Okay so moving on from annotations here  I'd like to show how Mol* can be a great way to investigate ligands in specific PDB entries. For example when on an entry page where ligands are present specific links will be available if you scroll down a little bit here on this entry for P450 these links will be visible for each chemical component. Then these are clicked we are taken to a ligand page and presented firstly with a 2D view of the ligand well doesn't seem to be working today the usually should be a 2d version of the ligand on the left-hand side here which describes ... protein residues but also an instance of Mol* on the right-hand side in 3D. Now there we go now our 2D view is  present If multiple versions of the ligand are in the structure these can be zoomed to specifically by using the drop-down box at the top to get refreshed visualization threes ligands. In this instance of Mol* on a ligand page to save space the right-hand control pane is hidden by default however by toggling the expanded view from the top control bar we can maximize the viewer to take a closer look. From here you can also show all the controls as they are available before for the toggle controls button and x-ray entries like this one the 2Fo-Fc and omission maps are shown by default and you can readily inspect specific ligands for any given entry. Now in the last interactive section of the talk I'll describe how Mol* works with other components of the PDBe website the help show correlations between sequence and structure data so from an entry page you can also choose to investigate macromolecular entities by the molecule details link now you can find this if you scroll a bit down on the page under the macromolecular tab so here we have molecule details. Now on this page we can see a linear description of the protein chains from n to c-terminus how different elements such as Uniprot sequence or Pfam domain align along it. Calculated features such as validation metrics and secondary structure are also shown at the bottom you'll be able to see a 2D secondary structure diagram and another instance of Mol* and the bottom Now these three panes are actually all tied together behind the scenes and if you hover over any one feature on any of them three components you should start to see how you can visually correct data between representations to further investigate the system for example here I can again investigate which residues have the worst validation metrics and if I choose to investigate one particular by left-clicking I'll get a zoom view in the 3d interface Mol* window both instances of Mol* are very similar to the previous ligand specific version now again if I click on the toggle fullscreen icon I can get a form reset the view. I can get a maximized window and now just finish I'd also like to show how you can show different models within a given entry and using this example of a solid state NMR entry. If I open the basic controls when available there will also be a model slider under the source name if you simply move the slider to a different model and click apply you should be able to traverse the ensemble to investigate each individual model okay so I hope I've been able to show some of the core features regarding the use of Mol* viewer another positive aspects to Mol* is that it's being actively improved by multiple developers and has been created with wider use cases and other developers in mind Therefore lastly I'd just like to highlight a few of these points firstly it's simple to embed on any website or indeed presentation but I hope I'll be able to show today and also comes alongside extensive documentation which is available through its github codebase then as you have also seen today specific instances of Mol* can be tailored to specific use cases we already have several variants between different PDB resources and whilst the core components are lightweight more complex modules can be loaded individually to help keep data transfer and processing to a minimum If you already have scripted viewers that you use or implement on your own websites Mol* was developed alongside a new query language MolQL and this can help in the transfer of existing scripts to the Mol* environment Lastly Mol* itself it's fully open source code all of which is available through the associated github account and for a bleeding-edge instance of Mol* that packs full functionality from all of the available modules please head over to Molstar.org to have a play okay so this is the end of the talk thanks for staying to the end of you're still with us. In conclusion I hope I'll be able to show that Mol* is a fast and simple online molecular viewer with powerful tools for analyzing complex structures By drawing upon the coordinated links that the PDB maintain I hope you can see how Mol* has the potential to readily allow comparison of structural models to their associated data and that it does so efficiently with particular regard to speedy visualization of volume maps. So this is now the end of the talk and If anyone has any questions myself and Mandar would be happy to answer them okay thanks very much James we do have time for questions while you're thinking of questions just a quick reminder that is part of our regular Wednesday webinar series and you can find all the information about upcoming webinars on our EBI training website which you can see the link or on the screen now. Do remember also to fill in the feedback survey alright let's take a quick look and see if there are questions and I know there were a couple coming through as we spoke so there was one question about can you use scripts for example in Python to customize visualization just for the purposes of the recording Mandar did answer this saying yes you can do that and there's a wiki page that tells you more about how many can do that yeah. So a question from Nicholas Is their plans for creating maps and then being able to rotate them this is necessary for EM visualization and their real problems with what EMDB is currently using. Interesting so I I'll make a note that. I'm not aware of anything in development or map slabbing but certainly that's something that we can look at improving The EMDB is also one of the EBI resources and it's quite closely linked PDBE so that's a perfect question to feedback. Any other questions? Any plans for a desktop app. So I suppose the quick answer is no and I guess a large fundamental part of Mol* is that it's an online viewer. I believe in should it be applicable you can load an instance of Mol* your browser disconnect from the web should you want and you can still play around that that that viewer in terms of being a totally separate and desktop application I don't think that's in the pipeline. The secondary part of the same question was what about displaying many frames and NMR data or MD trajectories. Yes as I said Mol* is being actively developed and those are on the agenda for upcoming versions. Okay so if there's any other questions keep writing them into the chat box. So there's a question about volumetric data and showing protein cavities. Is it possible to display it as density maps? Interesting, so I'm not familiar with that what that type of data file would be if it takes the shape of a typical map format file then perhaps yes I don't think the instances of Mol* on the PDBE website will allow you to upload that and do that but certainly on the Molstar.org bleeding-edge instance that might be a feature that you can play with there. I guess if you have specific datasets like you are playing if you can always get in touch with the Mol* team or the PDBe team with details about what you're using . Another question this afternoon is how easy is it to port JSMol scripts? So I believe this might be a question fro Mandar. I believe in principle it should be quite simple so This MolQL language has a translator what was the question in JSmol which should help to convert existing script into ones which are parsable by Mol* and not sure if Mandar has provided an answer but now I would say and it should be relatively easy yes. Mandar just added MolQL do support jmol as well. And he's provided a link that you can look up to to see how you might go about doing that. Are there any other questions for James and Mandar this afternoon? ok there don't seem to be any more questions there are a few thank yous coming through which is really nice to hear and I'm going to send thank you back to you all thank you for joining us this afternoon and being quite an interactive audience and thank you James for delivering a very interesting webinar we hope to see you all again soon. 